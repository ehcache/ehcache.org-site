<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <link rel="shortcut icon"  type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <title>Ehcache</title>

  <meta name="description" content="Java's most widely used cache.">

  <link rel="canonical" href="http://www.ehcache.org/documentation/2.7/integrations/googleappengine.html">
  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Ehcache Feed">


  <!-- Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,300italic,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

  <!-- Global CSS -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/spacelab/bootstrap.min.css">


<!--
  <link rel="stylesheet" href="/plugins/highlight/styles/idea.css">
  <script src="/plugins/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
-->

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/prettify.css"></script>

  <link rel="stylesheet" href="/css/main.css">

<!--
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  
    <script>
    
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-131151-10', 'auto');
    ga('send', 'pageview');


    </script>
  
</head>


  <body>

    

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="site-title" href="/"><img src="/images/ehcache.png" style="margin-top:15px;margin-bottom:6px;"/></a>
          <span style="vertical-align:bottom;color:gray;">By</span>
          <a class="SAG-Logo" href="https://www.softwareag.com/corporate/products/az/terracotta_ehcache/default.html"><img src="/images/SAG_Logo.png" style="margin-top:12px;margin-bottom:6px;height:1.5em;width:9em;"/></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="ehc_mnu_about"><a href="/about/"><i class="fa fa-info-circle"></i> About</a></li>
            <li id="ehc_mnu_docs"><a href="/documentation/"><i class="fa fa-book"></i> Docs</a></li>
            <li id="ehc_mnu_download"><a href="/downloads/"><i class="fa fa-download"></i> Download</a></li>
            <li id="ehc_mnu_community" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-users"></i> Community <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">We Love Contributors</li>
                <li><a href="/community/contribute.html"><i class="fa fa-code"></i> Contributing</a></li>
                <li><a href="/resources/"><i class="fa fa-external-link-square"></i> External Resources</a></li>
                <li><a href="http://blog.terracotta.org" target="_blank"><i class="fa fa-rss-square"></i> Terracotta Blog</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Forums</li>
                <li><a href="https://groups.google.com/forum/#!forum/ehcache-users" target="_blank"><i class="fa fa-commenting"></i> Users' Forum</a></li>
                <li><a href="https://groups.google.com/forum/#!forum/ehcache-dev" target="_blank"><i class="fa fa-commenting"></i> Developers' Forum</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Source Code</li>
                <li><a href="https://github.com/ehcache/ehcache3" target="_blank"><i class="fa fa-github"></i> GitHub  (Ehcache 3)</a></li>
                <li><a href="http://svn.terracotta.org/svn/ehcache/trunk" target="_blank"><i class="fa fa-code-fork"></i> SVN  (Ehcache 2)</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Bug Tracking</li>
                <li><a href="https://github.com/ehcache/ehcache3/issues" target="_blank"><i class="fa fa-bug"></i> GitHub  (Ehcache 3)</a></li>
                <li><a href="https://jira.terracotta.org/jira/browse/EHC" target="_blank"><i class="fa fa-bug"></i> Jira  (Ehcache 2)</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li id="ehc_mnu_events"><a href="/events"><i class="fa fa-calendar"></i> News & Events</a></li>
            <li><a href="/blog"><i class="fa fa-rss-square"></i> Ehcache Blog</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<br/>
<br/>
<br/>


    <div class="container-fluid">
      <div id="contentTitle">
        <h1></h1>
      </div>
      <div>
        <BR/>
        <br/>

<div class="container-fluid">

  <div class="row row-offcanvas row-offcanvas-left">

    <!-- sidebar -->
    <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
        <ul class="nav">
          <li class="submenu"><a href="/documentation/2.7/index.html">Docs Overview</a></li>
          <li class="submenu"><a href="/documentation/2.7/get-started/index.html">Getting Started</a></li>
          <li class="submenu"><a href="/documentation/2.7/configuration/index.html">Configuration</a></li>
          <li class="submenu"><a href="/documentation/2.7/bigmemory/index.html">BigMemory</a></li>
          <li class="submenu"><a href="/documentation/2.7/arc/index.html">Auto Resource Control (ARC)</a></li>
          <li class="submenu"><a href="/documentation/2.7/apis/index.html">APIs</a></li>
          <li class="submenu"><a href="/documentation/2.7/operations/index.html">Operations</a></li>
          <li class="submenu"><a href="/documentation/2.7/replication/index.html">Replication</a></li>
          <li class="submenu"><a href="/documentation/2.7/modules/index.html">Modules</a></li>
          <li class="submenu"><a href="/documentation/2.7/integrations/index.html">Integrations</a></li>
          <li class="submenu"><a href="/documentation/2.7/recipes/index.html">Recipes</a></li>
          <li class="submenu"><a href="/documentation/2.7/code-samples.html">Code Samples</a></li>
          <li class="submenu"><a href="/documentation/2.7/faq.html">FAQ</a></li>
          <li class="submenu"><a href="/apidocs/2.7.6/index.html" target="_blank">JavaDoc</a></li>
        </ul>
    </div>

    <!-- main area -->

    <div class="col-xs-12 col-sm-9">
      <header class="post-header">
        
        <h1 class="post-title"></h1>
        <hr/>
        
      </header>
      <article class="post-content">
        <h1 id="google-app-engine-(gae)-caching-&lt;a-name=”google-app-engine-caching}">Google App Engine (GAE) Caching &lt;a name=”google-app-engine-caching}</h1><div id="toc-container">
   <table class="toc" id="toc">
      <tbody>
         <tr>
            <td>
               <ul>
                  <li class="toc_level-1 toc_section-1">
                     <a href="#google-app-engine-(gae)-caching-&lt;a-name=”google-app-engine-caching}">
                        <span class="toctext">Google App Engine (GAE) Caching <a name="”google-app-engine-caching}&lt;/span" id="”google-app-engine-caching}&lt;/span"></a><ul><li class="toc_level-2 toc_section-2"><a href="#introduction"><span class="toctext">Introduction</span></a></li><li class="toc_level-2 toc_section-3"><a href="#compatibility"><span class="toctext">Compatibility</span></a></li><li class="toc_level-2 toc_section-4"><a href="#limitations"><span class="toctext">Limitations</span></a></li><li class="toc_level-2 toc_section-5"><a href="#dependencies"><span class="toctext">Dependencies</span></a></li><li class="toc_level-2 toc_section-6"><a href="#configuring-ehcache.xml"><span class="toctext">Configuring ehcache.xml</span></a></li><li class="toc_level-2 toc_section-7"><a href="#recipes"><span class="toctext">Recipes</span></a></li><li class="toc_level-2 toc_section-8"><a href="#troubleshooting-"><span class="toctext">Troubleshooting </span></a></li><li class="toc_level-2 toc_section-9"><a href="#sample-application"><span class="toctext">Sample application</span></a></li></ul></span>
                     </a>
                  </li>
               </ul>
            </td>
         </tr>
      </tbody>
   </table>
</div>

<h2 id="introduction">Introduction</h2>
<p>The ehcache-googleappengine module combines the speed of Ehcache with the scale of Google’s memcache and provide the best of both worlds:</p>

<ul>
  <li>Speed - Ehcache cache operations take a few microseconds, versus around 60ms for Google’s provided client-server cache, memcacheg.</li>
  <li>Cost -  Because it uses way less resources, it is also cheaper.</li>
  <li>Object Storage - Ehcache in-process cache works with Objects that are not Serializable.</li>
</ul>

<h2 id="compatibility">Compatibility</h2>
<p>Ehcache is compatible and works with Google App Engine.
Google App Engine provides a constrained runtime which restricts networking, threading and file system access.</p>

<h2 id="limitations">Limitations</h2>
<p>All features of Ehcache can be used except for the DiskStore and replication. Having said that, there are workarounds
for these limitations. See the Recipes section below.
As of June 2009, Google App Engine appears to be limited to a heap size of 100MB.
(See <a href="http://gregluck.com/blog/?s=limitations">this blog</a> for the evidence of this).</p>

<h2 id="dependencies">Dependencies</h2>
<p>Version 2.3 and higher of Ehcache are compatible with Google App Engine.
Older versions will not work.</p>

<h2 id="configuring-ehcache.xml">Configuring ehcache.xml</h2>
<p>Make sure the following elements are commented out:</p>

<ul>
  <li>&lt;diskStore path=”/path/to/store/data”/&gt;</li>
  <li>&lt;cacheManagerPeerProviderFactory class= ../&gt;</li>
  <li>&lt;cacheManagerPeerListenerFactory class= ../&gt;</li>
</ul>

<p>Within each cache element, ensure that:</p>

<ul>
  <li>overFlowToDisk and diskPersistent are omitted</li>
  <li>persistence strategy=none</li>
  <li>no replicators are added</li>
  <li>there is no bootstrapCacheLoaderFactory</li>
  <li>there is no Terracotta configuration</li>
</ul>

<p>Use following Ehcache configuration to get started.</p>

<div class="highlighter-rouge">
   <div class="highlight">
      <pre class="highlight">
         <code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;ehcache</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"ehcache.xsd"</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;cacheManagerEventListenerFactory</span> <span class="na">class=</span><span class="s">""</span> <span class="na">properties=</span><span class="s">""</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;defaultCache</span>
       <span class="na">maxEntriesOnHeap=</span><span class="s">"10000"</span>
       <span class="na">eternal=</span><span class="s">"false"</span>
       <span class="na">timeToIdleSeconds=</span><span class="s">"120"</span>
       <span class="na">timeToLiveSeconds=</span><span class="s">"120"</span>
       <span class="na">memoryStoreEvictionPolicy=</span><span class="s">"LRU"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;persistence</span> <span class="na">strategy=</span><span class="s">"none"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/defaultCache&gt;</span>
<span class="c">&lt;!--Example sample cache--&gt;</span>
    <span class="nt">&lt;cache</span> <span class="na">name=</span><span class="s">"sampleCache1"</span>
      <span class="na">maxEntriesOnHeap=</span><span class="s">"10000"</span>
      <span class="na">maxEntriesLocalDisk=</span><span class="s">"1000"</span>
      <span class="na">eternal=</span><span class="s">"false"</span>
      <span class="na">timeToIdleSeconds=</span><span class="s">"300"</span>
      <span class="na">timeToLiveSeconds=</span><span class="s">"600"</span>
      <span class="na">memoryStoreEvictionPolicy=</span><span class="s">"LFU"</span>
       <span class="nt">/&gt;</span>
<span class="nt">&lt;/ehcache&gt;</span>
</code>
      </pre>
   </div>
</div>

<h2 id="recipes">Recipes</h2>

<h3 id="setting-up-ehcache-as-a-local-cache-in-front-of-memcacheg">Setting up Ehcache as a local cache in front of memcacheg</h3>
<p>The idea here is that your caches are set up in a cache hierarchy. Ehcache sits in front and memcacheg behind.
Combining the two lets you elegantly work around limitations imposed by Google App Engine.
You get the benefits of the speed of Ehcache together with the umlimited size of memcached.
Ehcache contains the hooks to easily do this.
To update memcached, use a <code class="highlighter-rouge">CacheEventListener</code>.
To search against memcacheg on a local cache miss, use <code class="highlighter-rouge">cache.getWithLoader()</code> together with a
<code class="highlighter-rouge">CacheLoader</code> for memcacheg.</p>

<h3 id="using-memcacheg-in-place-of-a-diskstore">Using memcacheg in place of a <code class="highlighter-rouge">DiskStore</code></h3>
<p>In the <code class="highlighter-rouge">CacheEventListener</code>, ensure that when <code class="highlighter-rouge">notifyElementEvicted()</code> is called, which it will be
when a put exceeds the MemoryStore’s capacity, that the key and value are put into memcacheg.</p>

<h3 id="distributed-caching">Distributed Caching</h3>
<p>Configure all notifications in <code class="highlighter-rouge">CacheEventListener</code> to proxy throught to memcacheg.
Any work done by one node can then be shared by all others, with the benefit of local caching of frequently
used data.</p>

<h3 id="dynamic-web-content-caching">Dynamic Web Content Caching</h3>
<p>Google App Engine provides acceleration for files declared static in <code class="highlighter-rouge">appengine-web.xml</code>.</p>

<p>For example:</p>

<div class="highlighter-rouge">
   <div class="highlight">
      <pre class="highlight">
         <code>&lt;static-files&gt;
  &lt;include path="/**.png" /&gt;
  &lt;exclude path="/data/**.png" /&gt;
&lt;/static-files&gt;
</code>
      </pre>
   </div>
</div>

<p>You can get acceleration for dynamic files using Ehcache’s caching filters as you usually would.
See  <a href="/documentation/2.7/modules/web-caching">Web Caching</a> for more information.</p>

<h2 id="troubleshooting-">Troubleshooting <a name="google-app-engine-faq" id="google-app-engine-faq"></a></h2>

<h3 id="noclassdeffounderror">NoClassDefFoundError</h3>
<p>If you get the error <code class="highlighter-rouge">java.lang.NoClassDefFoundError: java.rmi.server.UID is a restricted class</code> then you are using a version of Ehcache prior to 1.6.</p>

<h2 id="sample-application">Sample application</h2>
<p>The easiest way to get started is to play with a simple sample app. We provide <a href="http://svn.terracotta.org/svn/forge/projects/ehcache-rails-demo/">a simple Rails application</a> which stores an integer value in a cache along with increment and decrement operations.
The sample app shows you how to use ehcache as a caching plugin and how to use it directly from the Rails
caching API.</p>

      </article>
    </div>

  </div>

</div>

      </div>
    </div>

    <br/>
<footer class="site-footer">

  <div class="container">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        Related Projects:<br/>
        <a href="http://www.terracotta.org"><img src="/images/Terracotta_Logo_sm.png" style="max-height: 16px;"></a><br/><br/>
        <a href="http://www.quartz-scheduler.org"><img src="/images/logo-quartz-scheduler.png" style="max-height: 20px;"></a>

        <!--
        <ul class="contact-list">
          <li>Ehcache</li>
          <li><a href="mailto:tc-oss@softwareag.com">tc-oss@softwareag.com</a></li>
        </ul>
      -->
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ehcache">
              <i class="fa fa-github"></i> GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/ehcache">
              <i class="fa fa-twitter"></i> Twitter
            </a>
          </li>
          

          
          <li>
            <a href="http://www.facebook.com/Terracotta">
              <i class="fa fa-facebook"></i> Facebook
            </a>
          </li>
          

          
          <li>
            <a href="http://www.linkedin.com/company/terracotta">
              <i class="fa fa-linkedin"></i> LinkedIn
            </a>
          </li>
          

          <li>
            <a href="/feed.xml" title="Atom/RSS Feed">
              <i class="fa fa-rss-square"></i> Atom/RSS Feed
            </a>
          </li>
        </ul>
      </div>

    <div class="footer-col  footer-col-3">
      <a href="/downloads/"><i class="fa fa-download"></i> Download Now</a>
      <br/>
      <a href="/documentation/"><i class="fa fa-book"></i> Documentation</a>
      <br/>
      <a href="/resources/"><i class="fa fa-external-link-square"></i> Resources</a>
      <br/>
      <a href="/blog/"><i class="fa fa-rss-square"></i> Ehcache Blog</a>
      <br/>
      <a href="/community/"><i class="fa fa-users"></i> Join the Community</a>
    </div>

    </div>

    <div class="container-fluid">
        <hr/>
        <a class="SAG-Logo" href="https://www.softwareag.com/corporate/products/az/terracotta_ehcache/default.html"><img src="/images/SAG_Logo.png" style="height:1.5em;width:9em;"/></a>
        <div class="footer-text">
          <em class="copyleft">Ehcache is Open Source and freely available under the Apache 2 License</em>
          <br/>
          <em class="copyright">&copy; Terracotta, Inc., a wholly-owned subsidiary of Software AG USA, Inc. All rights reserved.</em>
        </div>
    </div>
  </div>

</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>

<!--  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.0/jquery.scrollTo.min.js"/> -->

<script type="text/javascript">
        $('#').addClass("active");
        $('#').addClass("active");
</script>


  </body>

</html>
