<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <link rel="shortcut icon"  type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <title>Ehcache 2.7 Documentation</title>

  <meta name="description" content="Java's most widely used cache.">

  <link rel="canonical" href="http://www.ehcache.org/documentation/2.7/modules/cache-server.html">
  <link rel="alternate" type="application/rss+xml" title="Ehcache" href="http://www.ehcache.org/feed.xml" />



  <!-- Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,300italic,400italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

  <!-- Global CSS -->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/spacelab/bootstrap.min.css">


<!--
  <link rel="stylesheet" href="/plugins/highlight/styles/idea.css">
  <script src="/plugins/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
-->

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/prettify.css"></script>

  <link rel="stylesheet" href="/css/main.css">

<!--
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>


  <body>

    

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="site-title" href="/"><img src="/images/ehcache.png"/></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="ehc_mnu_about"><a href="/about/"><i class="fa fa-info-circle"></i> About</a></li>
            <li id="ehc_mnu_docs"><a href="/documentation/"><i class="fa fa-book"></i> Docs</a></li>
            <li id="ehc_mnu_download"><a href="/downloads/"><i class="fa fa-download"></i> Download</a></li>
            <li id="ehc_mnu_community" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-users"></i> Community <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">We Love Contributors</li>
                <li><a href="/community/"><i class="fa fa-code"></i> Contributing</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Forums</li>
                <li><a href="https://groups.google.com/forum/#!forum/ehcache-users" target="_blank"><i class="fa fa-commenting"></i> Users' Forum</a></li>
                <li><a href="https://groups.google.com/forum/#!forum/ehcache-dev" target="_blank"><i class="fa fa-commenting"></i> Developers' Forum</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Source Code</li>
                <li><a href="https://github.com/ehcache/ehcache3"><i class="fa fa-github"></i> GitHub  (Ehcache 3)</a></li>
                <li><a href="http://svn.terracotta.org/svn/ehcache/trunk"><i class="fa fa-code-fork"></i> SVN  (Ehcache 2)</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Bug Tracking</li>
                <li><a href="https://github.com/ehcache/ehcache3/issues"><i class="fa fa-bug"></i> GitHub  (Ehcache 3)</a></li>
                <li><a href="https://jira.terracotta.org/jira/browse/EHC"><i class="fa fa-bug"></i> Jira  (Ehcache 2)</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li id="ehc_mnu_events"><a href="/events"><i class="fa fa-calendar"></i> News & Events</a></li>
            <li><a href="http://blog.terracotta.org"><i class="fa fa-rss-square"></i>  Blog</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<br/>
<br/>
<br/>


    <div class="container-fluid">
      <div id="contentTitle">
        <h1>Ehcache 2.7 Documentation</h1>
      </div>
      <div>
        <br/>

<div class="container-fluid">

  <div class="row row-offcanvas row-offcanvas-left">

    <!-- sidebar -->
    <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
        <ul class="nav">
          <li class="submenu"><a href="/documentation/2.7/index.html">Docs Overview</a></li>
          <li class="submenu"><a href="/documentation/2.7/get-started/index.html">Getting Started</a></li>
          <li class="submenu"><a href="/documentation/2.7/configuration/index.html">Configuration</a></li>
          <li class="submenu"><a href="/documentation/2.7/bigmemory/index.html">BigMemory</a></li>
          <li class="submenu"><a href="/documentation/2.7/arc/index.html">Auto Resource Control (ARC)</a></li>
          <li class="submenu"><a href="/documentation/2.7/apis/index.html">APIs</a></li>
          <li class="submenu"><a href="/documentation/2.7/operations/index.html">Operations</a></li>
          <li class="submenu"><a href="/documentation/2.7/replication/index.html">Replication</a></li>
          <li class="submenu"><a href="/documentation/2.7/modules/index.html">Modules</a></li>
          <li class="submenu"><a href="/documentation/2.7/integrations/index.html">Integrations</a></li>
          <li class="submenu"><a href="/documentation/2.7/recipes/index.html">Recipes</a></li>
          <li class="submenu"><a href="/documentation/2.7/code-samples.html">Code Samples</a></li>
          <li class="submenu"><a href="/documentation/2.7/faq.html">FAQ</a></li>
          <li class="submenu"><a href="/apidocs/2.7.6/index.html" target="_blank">JavaDoc</a></li>
        </ul>
    </div>

    <!-- main area -->

    <div class="col-xs-12 col-sm-9">
      <header class="post-header">
         
      </header>
      <article class="post-content">
        <h1 id="cache-server-">Cache Server <a name="Cache-Server" id="Cache-Server"></a></h1><div id="toc-container">
   <table class="toc" id="toc">
      <tbody>
         <tr>
            <td>
               <ul>
                  <li class="toc_level-1 toc_section-1">
                     <a href="#cache-server-">
                        <span class="toctext">Cache Server </span>
                     </a>
                     <ul>
                        <li class="toc_level-2 toc_section-2">
                           <a href="#introduction">
                              <span class="toctext">Introduction</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-3">
                           <a href="#restful-web-services">
                              <span class="toctext">RESTful Web Services</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-4">
                           <a href="#w3c-(soap)-web-services">
                              <span class="toctext">W3C (SOAP) Web Services</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-5">
                           <a href="#requirements">
                              <span class="toctext">Requirements</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-6">
                           <a href="#downloading">
                              <span class="toctext">Downloading</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-7">
                           <a href="#installation">
                              <span class="toctext">Installation</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-8">
                           <a href="#installing-the-standalone-server">
                              <span class="toctext">Installing the Standalone Server</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-9">
                           <a href="#monitoring">
                              <span class="toctext">Monitoring</span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-10">
                           <a href="#download-">
                              <span class="toctext">Download </span>
                           </a>
                        </li>
                        <li class="toc_level-2 toc_section-11">
                           <a href="#faq-">
                              <span class="toctext">FAQ </span>
                           </a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </td>
         </tr>
      </tbody>
   </table>
</div>

<h2 id="introduction">Introduction</h2>
<p>Ehcache now comes with a Cache Server, available as a WAR for most web containers, or as a standalone server. Note that if using with Terracotta BigMemory, this will <em>not</em> work with versions 4.x.
The Cache Server has two APIs: RESTful resource oriented, and SOAP. Both support clients in any programming
language.
(A Note on terminology: Leonard Richardson and Sam Ruby have done a great job of clarifying the different Web Services architectures and
distinguishing them from each other. We use their taxonomy in describing web services. See the <a href="http://www.oreilly.com/catalog/9780596529260/">Oreilly catalog</a>.)</p>

<h2 id="restful-web-services">RESTful Web Services</h2>
<p>Roy Fielding coined the acronym REST, denoting Representational State Transfer, in his
<a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">PhD thesis</a>.
The Ehcache implementation strictly follows the RESTful resource-oriented architecture style.
Specifically:</p>

<ul>
  <li>The HTTP methods GET, HEAD, PUT/POST and DELETE are used to specify the method of the operation. The
 URI does not contain method information.</li>
  <li>The scoping information, used to identify the resource to perform the method on, is contained in the
 URI path.</li>
  <li>The RESTful Web Service is described by and exposes a <a id="WADL"></a>Web Application Description Language (WADL) file. It contains the URIs you can call, and what data to pass and get back. Use the OPTIONS method to return the WADL.</li>
</ul>

<p>Roy is on the JSR311 expert group. JSR311 and Jersey, the reference implementation, are used to deliver RESTful web services in Ehcache server.</p>

<h3 id="restful-web-services-api">RESTFul Web Services API</h3>
<p>The Ehcache RESTFul Web Services API exposes the singleton CacheManager, which typically has been configured
in ehcache.xml or an IoC container. Multiple CacheManagers are not supported.
Resources are identified using a URI template. The value in parentheses should be substituted with a literal
to specify a resource.
Response codes and response headers strictly follow HTTP conventions.</p>

<h3 id="cachemanager-resource-operations">CacheManager Resource Operations</h3>

<h4 id="options-cache">OPTIONS /{cache}”/&gt;</h4>
<p>Retrieves the WADL for describing the available CacheManager operations.</p>

<h4 id="get-">GET} /</h4>
<p>Lists the Caches in the CacheManager.</p>

<h3 id="cache-resource-operations">Cache Resource Operations</h3>

<h4 id="options-cache-1">OPTIONS /{cache}”/&gt;</h4>
<p>Retrieves the WADL describing the available Cache operations.</p>

<h4 id="head-cache">HEAD /{cache}”/&gt;</h4>
<p>Retrieves the same metadata a GET would receive returned as HTTP headers. There is no body returned.</p>

<h4 id="get-cache">GET /{cache"/&gt;</h4>
<p>Gets a cache representation. This includes useful metadata such as the configuration and cache statistics.</p>

<h4 id="put-cache">{PUT} /{cache"/&gt;</h4>
<p>Creates a Cache using the defaultCache configuration.</p>

<h4 id="delete--cache">{DELETE} / {cache"/&gt;</h4>
<p>Deletes the Cache.</p>

<h3 id="element-resource-operations">Element Resource Operations</h3>

<h4 id="options-cache-2">OPTIONS /{cache}”/&gt;</h4>
<p>Retrieves the WADL describing the available Element operations.</p>

<h4 id="head-cacheelement">HEAD /{cache}/{element"/&gt;</h4>
<p>Retrieves the same metadata a GET would receive returned as HTTP headers. There is no body returned.</p>

<h4 id="get-cacheelement">GET /{cache}/{element"/&gt;</h4>
<p>Gets the element value.</p>

<h4 id="head-cacheelement-1">HEAD /{cache}/{element"/&gt;</h4>
<p>Gets the element’s metadata.</p>

<h4 id="put-cacheelement-a-nameget-">PUT /{cache}/{element\ &lt;a name=”GET} /</h4>
<p>Lists the Caches in the CacheManager.</p>

<h3 id="cache-resource-operations-1">Cache Resource Operations</h3>

<h4 id="options-cache-3">OPTIONS /{cache}”/&gt;</h4>
<p>Retrieves the WADL describing the available Cache operations.</p>

<h4 id="head-cache-1">HEAD /{cache}”/&gt;</h4>
<p>Retrieves the same metadata a GET would receive returned as HTTP headers. There is no body returned.</p>

<h4 id="get-cache-1">GET /{cache"/&gt;</h4>
<p>Gets a cache representation. This includes useful metadata such as the configuration and cache statistics.</p>

<h4 id="put-cache-1">{PUT} /{cache"/&gt;</h4>
<p>Creates a Cache using the defaultCache configuration.</p>

<h4 id="delete--cache-1">{DELETE} / {cache"/&gt;</h4>
<p>Deletes the Cache.</p>

<h3 id="element-resource-operations-1">Element Resource Operations</h3>

<h4 id="options-cache-4">OPTIONS /{cache}”/&gt;</h4>
<p>Retrieves the WADL describing the available Element operations.</p>

<h4 id="head-cacheelement-2">HEAD /{cache}/{element"/&gt;</h4>
<p>Retrieves the same metadata a GET would receive returned as HTTP headers. There is no body returned.</p>

<h4 id="get-cacheelement-1">GET /{cache}/{element"/&gt;</h4>
<p>Gets the element value.</p>

<h4 id="head-cacheelement-3">HEAD /{cache}/{element"/&gt;</h4>
<p>Gets the element’s metadata.</p>

<h4 id="put-cacheelement">PUT /{cache}/{element"/&gt;</h4>
<p>Puts an element into the Cache.
The time to live of new Elements defaults to that for the cache. This may be overridden by setting the
HTTP request header <code>ehcacheTimeToLiveSeconds</code>. Values of 0 to 2147483647 are accepted. A value of 0
means eternal.</p>

<h4 id="delete--cacheelement">DELETE / {cache}/{element"/&gt;</h4>
<p>Deletes the element from the cache.
The resource representation for all elements is <code>*</code>. <code>DELETE/\{cache\}/\*</code> will call <code>cache.removeAll()</code>.</p>

<h3 id="resource-representations">Resource Representations</h3>
<p>We deal with resource representations rather than resources themselves.</p>

<h4 id="element-resource-representations">Element Resource Representations</h4>
<p>When Elements are PUT into the cache, a MIME Type should be set in the request header.
The MIME Type is preserved for later use.
The new <code>MimeTypeByteArray</code> is used to store the <code>byte[]</code> and the <code>MimeType</code>
in the value field of <code>Element</code>.
Some common MIME Types which are expected to be used by clients are:</p>

<table>
  <thead>
    <tr>
      <th>text/plain</th>
      <th>Plain text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>text/xml</td>
      <td>Extensible Markup Language. Defined in RFC 3023</td>
    </tr>
    <tr>
      <td>application/json</td>
      <td>JavaScript Object Notation JSON. Defined in RFC 4627</td>
    </tr>
    <tr>
      <td>application/x-java-serialized-object</td>
      <td>A serialized Java object</td>
    </tr>
  </tbody>
</table>

<p>Because Ehcache is a distributed Java cache, in some configurations the Cache server may contain Java objects
that arrived at the Cache server via distributed replication. In this case no MIME Type will be set
and the Element will be examined to determine its MIME Type.
Because anything that can be PUT into the cache server must be Serializable, it can also be distributed
in a cache cluster i.e. it will be Serializable.</p>

<h3 id="restful-code-samples">{RESTful Code Samples”/&gt;</h3>
<p>These are RESTful code samples in multiple languages.</p>

<h4 id="curl-code-samples">Curl Code Samples</h4>
<p>These samples use the popular curl command line utility.</p>

<h5 id="options">OPTIONS</h5>
<p>This example shows how calling OPTIONS causes Ehcache server to respond with the WADL for that resource</p>

<pre>
   <code>curl --request OPTIONS http://localhost:8080/ehcache/rest/sampleCache2/2
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;application xmlns="https://wadl.java.net/wadl200610-rddl.xhtml"&gt;
  &lt;resources base="http://localhost:8080/ehcache/rest/"&gt;
    &lt;resource path="sampleCache2/2"&gt;
      &lt;method name="HEAD"&gt;&lt;response&gt;&lt;representation mediaType="
      ...
    &lt;/resource&gt;
  &lt;/resources&gt;
&lt;/application&gt;
</code>
</pre>

<h5 id="head">HEAD</h5>

<pre>
   <code>curl --head  http://localhost:8080/ehcache/rest/sampleCache2/2
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>HTTP/1.1 200 OK
X-Powered-By: Servlet/2.5
Server: GlassFish/v3
Last-Modified: Sun, 27 Jul 2008 08:08:49 GMT
ETag: "1217146129490"
Content-Type: text/plain; charset=iso-8859-1
Content-Length: 157
Date: Sun, 27 Jul 2008 08:17:09 GMT
</code>
</pre>

<h5 id="put">PUT</h5>

<pre>
   <code>echo "Hello World" |  curl -S -T -  http://localhost:8080/ehcache/rest/sampleCache2/3
</code>
</pre>

<p>The server will put <code>Hello World</code> into <code>sampleCache2</code> using key <code>3</code>.</p>

<h5 id="get">GET</h5>

<pre>
   <code>curl http://localhost:8080/ehcache/rest/sampleCache2/2
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>&lt;?xml version="1.0"?&gt;
&lt;oldjoke&gt;
&lt;burns&gt;Say &lt;quote&gt;goodnight&lt;/quote&gt;,
Gracie.&lt;/burns&gt;
&lt;allen&gt;&lt;quote&gt;Goodnight,
Gracie.&lt;/quote&gt;&lt;/allen&gt;
&lt;applause/&gt;
</code>
</pre>

<h4 id="ruby-code-samples">Ruby Code Samples</h4>

<h5 id="get-1">GET</h5>

<pre>
   <code>require 'rubygems'
require 'open-uri'
require 'rexml/document'
response = open('http://localhost:8080/ehcache/rest/sampleCache2/2')
xml = response.read
puts xml
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>&lt;?xml version="1.0"?&gt;
&lt;oldjoke&gt;
&lt;burns&gt;Say &lt;quote&gt;goodnight&lt;/quote&gt;,
Gracie.&lt;/burns&gt;
&lt;allen&gt;&lt;quote&gt;Goodnight,
Gracie.&lt;/quote&gt;&lt;/allen&gt;
&lt;applause/&gt;
&lt;/oldjoke&gt;
</code>
</pre>

<h4 id="python-code-samples">Python Code Samples</h4>

<h5 id="get-2">GET</h5>

<pre>
   <code>import urllib2
f = urllib2.urlopen('http://localhost:8080/ehcache/rest/sampleCache2/2')
print f.read()
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>&lt;?xml version="1.0"?&gt;
&lt;oldjoke&gt;
&lt;burns&gt;Say &lt;quote&gt;goodnight&lt;/quote&gt;,
Gracie.&lt;/burns&gt;
&lt;allen&gt;&lt;quote&gt;Goodnight,
Gracie.&lt;/quote&gt;&lt;/allen&gt;
&lt;applause/&gt;
&lt;/oldjoke&gt;
</code>
</pre>

<h4 id="java-code-samples">Java Code Samples</h4>

<h5 id="create-and-get-a-cache-and-entry">Create and Get a Cache and Entry</h5>

<pre>
   <code>package samples;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
/**
* A simple example Java client which uses the built-in java.net.URLConnection.
*
* @author BryantR
* @author Greg Luck
*/
public class ExampleJavaClient {
private static String TABLE_COLUMN_BASE =
       "http://localhost:8080/ehcache/rest/tableColumn";
private static String TABLE_COLUMN_ELEMENT =
       "http://localhost:8080/ehcache/rest/tableColumn/1";
/**
* Creates a new instance of EHCacheREST
*/
public ExampleJavaClient() {
"/&gt;
public static void main(String[] args) {
   URL url;
   HttpURLConnection connection = null;
   InputStream is = null;
   OutputStream os = null;
   int result = 0;
   try {
       //create cache
       URL u = new URL(TABLE_COLUMN_BASE);
       HttpURLConnection urlConnection = (HttpURLConnection) u.openConnection();
       urlConnection.setRequestMethod("PUT");
        int status = urlConnection.getResponseCode();
       System.out.println("Status: " + status);
       urlConnection.disconnect();
        //get cache
       url = new URL(TABLE_COLUMN_BASE);
       connection = (HttpURLConnection) url.openConnection();
       connection.setRequestMethod("GET");
       connection.connect();
       is = connection.getInputStream();
       byte[] response1 = new byte[4096];
       result = is.read(response1);
       while (result != -1) {
           System.out.write(response1, 0, result);
           result = is.read(response1);
       "/&gt;
       if (is != null) try {
           is.close();
       } catch (Exception ignore) {
       "/&gt;
       System.out.println("reading cache: " + connection.getResponseCode()
               + " " + connection.getResponseMessage());
       if (connection != null) connection.disconnect();
        //create entry
       url = new URL(TABLE_COLUMN_ELEMENT);
       connection = (HttpURLConnection) url.openConnection();
       connection.setRequestProperty("Content-Type", "text/plain");
       connection.setDoOutput(true);
       connection.setRequestMethod("PUT");
       connection.connect();
       String sampleData = "Ehcache is way cool!!!";
       byte[] sampleBytes = sampleData.getBytes();
       os = connection.getOutputStream();
       os.write(sampleBytes, 0, sampleBytes.length);
       os.flush();
       System.out.println("result=" + result);
       System.out.println("creating entry: " + connection.getResponseCode()
               + " " + connection.getResponseMessage());
       if (connection != null) connection.disconnect();
        //get entry
       url = new URL(TABLE_COLUMN_ELEMENT);
       connection = (HttpURLConnection) url.openConnection();
       connection.setRequestMethod("GET");
       connection.connect();
       is = connection.getInputStream();
       byte[] response2 = new byte[4096];
       result = is.read(response2);
       while (result != -1) {
           System.out.write(response2, 0, result);
           result = is.read(response2);
       "/&gt;
       if (is != null) try {
           is.close();
       } catch (Exception ignore) {
       "/&gt;
       System.out.println("reading entry: " + connection.getResponseCode()
               + " " + connection.getResponseMessage());
       if (connection != null) connection.disconnect();
   } catch (Exception e) {
       e.printStackTrace();
   } finally {
       if (os != null) try {
           os.close();
       } catch (Exception ignore) {
       "/&gt;
       if (is != null) try {
           is.close();
       } catch (Exception ignore) {
       "/&gt;
       if (connection != null) connection.disconnect();
   "/&gt;
"/&gt;
"/&gt;
</code>
</pre>

<h4 id="scala-code-samples">Scala Code Samples</h4>

<h5 id="get-3">GET</h5>

<pre>
   <code>import java.net.URL
  import scala.io.Source.fromInputStream
object ExampleScalaGet extends Application {
val url = new URL("http://localhost:8080/ehcache/rest/sampleCache2/2")
fromInputStream(url.openStream).getLines.foreach(print)
  "/&gt;
</code>
</pre>

<p>Run it with:</p>

<pre>
   <code>scala -e ExampleScalaGet
</code>
</pre>

<p>The program outputs:</p>

<pre>
   <code>&lt;?xml version="1.0"?&gt;
&lt;oldjoke&gt;
&lt;burns&gt;Say &lt;quote&gt;goodnight&lt;/quote&gt;,
Gracie.&lt;/burns&gt;
&lt;allen&gt;&lt;quote&gt;Goodnight,
Gracie.&lt;/quote&gt;&lt;/allen&gt;
&lt;applause/&gt;
</code>
</pre>

<h4 id="php-code-samples">PHP Code Samples</h4>

<h5 id="get-4">GET</h5>

<pre>
   <code>  &lt;?php
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, "http://localhost:8080/ehcache/rest/sampleCache2/3");
  curl_setopt ($ch, CURLOPT_HEADER, 0);
curl_exec ($ch);
curl_close ($ch);
  ?&gt;
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>Hello Ingo
</code>
</pre>

<h5 id="put-1">PUT</h5>

<pre>
   <code>  &lt;?php
$url = "http://localhost:8080/ehcache/rest/sampleCache2/3";
$localfile = "localfile.txt";
$fp = fopen ($localfile, "r");
$ch = curl_init();
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_PUT, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($localfile));
$http_result = curl_exec($ch);
$error = curl_error($ch);
$http_code = curl_getinfo($ch ,CURLINFO_HTTP_CODE);
curl_close($ch);
fclose($fp);
print $http_code;
print "&lt;br /&gt;&lt;br /&gt;$http_result";
if ($error) {
  print "&lt;br /&gt;&lt;br /&gt;$error";
"/&gt;
?&gt;
</code>
</pre>

<p>The server responds with:</p>

<pre>
   <code>## About to connect() to localhost port 8080 (#0)

## Trying ::1... * connected

## Connected to localhost (::1) port 8080 (#0)
&gt; PUT /ehcache/rest/sampleCache2/3 HTTP/1.1
Host: localhost:8080
Accept: */*
Content-Length: 11
Expect: 100-continue
&lt; HTTP/1.1 100 Continue
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/ehcache/rest/sampleCache2/3
&lt; Content-Length: 0
&lt; Server: Jetty(6.1.10)
&lt;

## Connection #0 to host localhost left intact

## Closing connection #0
</code>
</pre>

<p><a id="Creating Massive Caches"></a>
## Creating Massive Caches with Load Balancers and Partitioning <a name="Load-Balancers" id="Load-Balancers"></a>
The RESTful Ehcache Server is designed to achieve massive scaling using data partitioning - all from a RESTful interface.
The largest Ehcache single instances run at around 20GB in memory. The largest disk stores run at 100Gb each.
Add nodes together, with cache data partitioned across them, to get larger sizes. 50 nodes at 20GB gets you to 1 Terabyte.
Two deployment choices need to be made:</p>

<ul>
  <li>where is partitoning performed, and</li>
  <li>is redundancy required?</li>
</ul>

<p>These choices can be mixed and matched with a number of different deployment topologies.</p>

<h3 id="non-redundant-scalable-with-client-hash-based-routing">Non-redundant, Scalable with client hash-based routing</h3>

<p>
   <img src="/images/documentation/loadbalancer_client_hashing_nonredundant.png" alt="EhcacheImage" />
</p>

<p>This topology is the simplest. It does not use a load balancer. Each node is accessed directly by the cache client using REST.
No redundancy is provided.
The client can be implemented in any language because it is simply a HTTP client.
It must work out a partitioning scheme. Simple key hashing, as used by memcached, is sufficient.
Here is a Java code sample:</p>

<pre>
   <code>String[] cacheservers = new String[]{"cacheserver0.company.com", "cacheserver1.company.com",
"cacheserver2.company.com", "cacheserver3.company.com", "cacheserver4.company.com",
"cacheserver5.company.com"};
Object key = "123231";
int hash = Math.abs(key.hashCode());
int cacheserverIndex = hash % cacheservers.length;
String cacheserver = cacheservers[cacheserverIndex];
</code>
</pre>

<h3 id="redundant-scalable-with-client-hash-based-routing">Redundant, Scalable with client hash-based routing</h3>

<p>
   <img src="/images/documentation/loadbalancer_client_hashing.png" alt="Ehcache Image" />
</p>

<p>Redundancy is added as shown in the above diagram by:
Replacing each node with a cluster of two nodes. One of the existing distributed caching options in Ehcache is used to form the cluster.
Options in Ehcache 1.5 are RMI and JGroups-based clusters. Ehcache-1.6 will add JMS as a further option.
Put each Ehcache cluster behind VIPs on a load balancer.</p>

<h3 id="redundant-scalable-with-load-balancer-hash-based-routing">Redundant, Scalable with load balancer hash-based routing</h3>

<p>
   <img src="/images/documentation/loadbalancer_hashing.png" alt="Ehcache Image" />
</p>

<p>Many content-switching load balancers support URI routing using some form of regular expressions.
So, you could optionally skip the client-side hashing to achieve partitioning in the load balancer itself.
For example:</p>

<pre>
   <code>/ehcache/rest/sampleCache1/[a-h]* =&gt; cluster1
/ehcache/rest/sampleCache1/[i-z]* =&gt; cluster2
</code>
</pre>

<p>Things get much more sophisticated with F5 load balancers, which let you create iRules in the TCL language.
  So rather than regular expression URI routing, you could implement key hashing-based URI routing.
  Remember in Ehcache’s RESTful server, the key forms the last part of the URI.
  e.g. In the URI http://cacheserver.company.com/ehcache/rest/sampleCache1/3432 , 3432 is the key.
You hash using the last part of the URI.
See <a href="http://devcentral.f5.com/Default.aspx?tabid=63&amp;PageID=153&amp;ArticleID=135&amp;articleType=ArticleView">this article</a> for
  how to implment a URI hashing iRule on F5 load balancers.</p>

<h2 id="w3c-(soap)-web-services">W3C (SOAP) Web Services</h2>
<p>The <a href="http://www.w3.org/">W3C</a> is a standards body that defines Web Services as</p>

<pre>
   <code>The World Wide Web is more and more used for application to application communication.
The programmatic interfaces made available are referred to as Web services.
</code>
</pre>

<p>They provide a <a href="http://www.w3.org/2002/ws/">set of recommendations</a> for achieving this.
An interoperability organisation, <a href="http://www.ws-i.org/">WS-I</a>, seeks to achieve interoperability between
W3C Web Services. The W3C specifications for SOAP and WSDL are required to meet the WS-I definition.
Ehcache is using Glassfish’s libraries to provide it’s W3C web services. The project known as Metro
follows the WS-I definition.</p>

<p>Finally, <a href="http://oasis-open.org">OASIS</a>, defines a Web Services Security specification for SOAP: WS-Security.
The current version is 1.1. It provides three main security mechanisms: ability to send security tokens as part of a
message, message integrity, and message confidentiality.
Ehcache’s W3C Web Services support the stricter WS-I definition and use the SOAP and WSDL specifications.
Specifically:</p>

<ul>
  <li>The method of operation is in the entity-body of the SOAP envelope and a HTTP header. POST is always used as the HTTP method.</li>
  <li>The scoping information, used to identify the resource to perform the method on, is contained in the SOAP entity-body. The URI path is always the same for a given Web Service - it is the service “endpoint”.</li>
  <li>The Web Service is described by and exposes a {WSDL} (Web Services Description Language) file. It contains the methods, their arguments and what data types are used.</li>
  <li>The {WS-Security} SOAP extensions are supported.</li>
</ul>

<h3 id="w3c-web-services-api">W3C Web Services API</h3>
<p>The Ehcache RESTFul Web Services API exposes the singleton CacheManager, which typically has been configured
in ehcache.xml or an IoC container. Multiple CacheManagers are not supported.
The API definition is as follows:</p>

<ul>
  <li>WSDL - <a href="http://ehcache.org/wsdl/EhcacheWebServiceEndpointService.wsdl">EhcacheWebServiceEndpointService.wsdl</a></li>
  <li>Types - <a href="http://ehcache.org/wsdl/EhcacheWebServiceEndpointService_schema1.xsd">EhcacheWebServiceEndpointService_schema1.xsd</a></li>
</ul>

<h3 id="security">Security</h3>
<p>By default no security is configured. Because it is simply a Servlet 2.5 web application, it can be secured in all the
usual ways by configuration in the web.xml.</p>

<p>In addition the cache server supports the use of <a href="https://xwss.java.net/">XWSS 3.0</a> to secure the Web Service. All required libraries
are packaged in the war for XWSS 3.0.
A sample, commented out server_security_config.xml is provided in the WEB-INF directory. XWSS automatically
looks for this configuration file.
A simple example, based on an XWSS example, <code>net.sf.ehcache.server.soap.SecurityEnvironmentHandler</code>, which looks for a
password in a System property for a given username is included. This is not recommended for production use
but is handy when you are getting started with XWSS.
To use XWSS:</p>

<ol>
  <li>
    <p>Add configuration in accordance with XWSS to the <code>server_security_config.xml</code> file.</p>
  </li>
  <li>
    <p>Create a class which implements the <code>CallbackHandler</code> interface and provide its fully qualified path in the <code>SecurityEnvironmentHandler</code> element.</p>
  </li>
  <li>
    <p>Use the integration test <code>EhcacheWebServiceEndpoint</code> to see how to use the XWSS client side.</p>
  </li>
  <li>
    <p>On the client side, make sure configuration is provided in a file called <code>client_security_config.xml</code>, which must be in the root of the classpath.</p>
  </li>
  <li>
    <p>To add client credentials into the SOAP request do:</p>
  </li>
</ol>

<pre>
   <code>cacheService = new EhcacheWebServiceEndpointService().getEhcacheWebServiceEndpointPort();
//add security credentials
((BindingProvider)cacheService).getRequestContext().put(BindingProvider.USERNAME_PROPERTY,
"Ron");
((BindingProvider)cacheService).getRequestContext().put(BindingProvider.PASSWORD_PROPERTY,
"noR");
String result = cacheService.ping();
</code>
</pre>

<h2 id="requirements">Requirements</h2>

<h3 id="java">Java</h3>
<p>Java 5 or 6.</p>

<h3 id="web-container-war-packaged-version-only">Web Container (WAR packaged version only)</h3>
<p>The standalone server comes with its own embedded Glassfish web container.
The web container must support the Servlet 2.5 specification.
The following web container configuration have been tested:</p>

<ul>
  <li>Glassfish V2/V3</li>
  <li>Tomcat 6</li>
  <li>Jetty 6</li>
</ul>

<h2 id="downloading">Downloading</h2>
<p>The server is available as follows:</p>

<h3 id="sourceforge">Sourceforge</h3>
<p>Download <a href="http://sourceforge.net/project/showfiles.php?group_id=93232">here</a>.
There are two tarball archives in tar.gz format:</p>

<ul>
  <li>ehcache-server - this contains the WAR file which must be deployed in your own web container.</li>
  <li>ehcache-standalone-server - this contains a complete standalone directory structure with an embedded Glassfish V3 web container together with shell scripts for starting and stopping.</li>
</ul>

<h3 id="maven">Maven</h3>
<p>The Ehcache Server is in the central Maven repository packaged as type <em>war</em>. Use the following Maven pom snippet:</p>

<pre>
   <code>  &lt;dependency&gt;
   &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;
   &lt;artifactId&gt;ehcache-server&lt;/artifactId&gt;
   &lt;version&gt;enter_version_here&lt;/version&gt;
   &lt;type&gt;war&lt;/type&gt;
  &lt;/dependency&gt;
</code>
</pre>

<p>It is also available as a jaronly version, which makes it easier to embed. This version excludes all META-INF
and WEB-INF configuration files, and also excludes the ehcache.xml. You need to provide these in your maven project.</p>

<pre>
   <code>&lt;dependency&gt;
   &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;
   &lt;artifactId&gt;ehcache-server&lt;/artifactId&gt;
   &lt;version&gt;enter_version_here&lt;/version&gt;
   &lt;type&gt;jar&lt;/type&gt;
   &lt;classifier&gt;jaronly&lt;/classifier&gt;
  &lt;/dependency&gt;
</code>
</pre>

<h2 id="installation">Installation</h2>

<h3 id="installing-the-war">Installing the WAR</h3>
<p>Use your Web Container’s instructions to install the WAR or include the WAR in your project with
Maven’s war plugin.
Web Container specific configuration is provided in the WAR as follows:</p>

<ul>
  <li>sun-web.xml - Glassfish V2/V3 configuration</li>
  <li>jetty-web.xml - Jetty V5/V6 configuration</li>
</ul>

<p>Tomcat V6 passes all integration tests. It does not require a specific configuration.</p>

<h3 id="configuring-the-web-application">Configuring the Web Application</h3>
<p>Expand the WAR.
Edit the web.xml.</p>

<h4 id="disabling-the-restful-web-service">Disabling the RESTful Web Service</h4>
<p>Comment out the RESTful web service section.</p>

<h4 id="disabling-the-soap-web-service">Disabling the SOAP Web Service</h4>
<p>Comment out the RESTful web service section.</p>

<h4 id="configuring-caches">Configuring Caches</h4>
<p>The ehcache.xml configuration file is located in <code>WEB-INF/classes/ehcache.xml</code>.
Follow the instructions in this config file, or the core Ehcache instructions to configure.</p>

<h4 id="soap-web-service-security">SOAP Web Service Security</h4>

<h2 id="installing-the-standalone-server">Installing the Standalone Server</h2>
<p>The WAR also comes packaged with a standalone server, based on Glassfish V3 Embedded.
The quick start is:</p>

<ul>
  <li>Untar the download.</li>
  <li><code>bin/start.sh</code> to start. By default it will listen on port 8080, with JMX listening on port 8081, will have both RESTful and SOAP web services enabled, and will use a sample Ehcache configuration from the WAR module.</li>
  <li><code>bin/stop.sh</code> to stop.</li>
</ul>

<h3 id="configuring-the-standalone-server">Configuring the Standalone Server</h3>
<p>Configuration is by editing the <code>war/web.xml</code> file as per the instructions for the WAR packaging.</p>

<h3 id="starting-and-stopping-the-standalone-server">Starting and Stopping the Standalone Server</h3>

<h4 id="using-commons-daemon-jsvc">Using Commons Daemon jsvc</h4>
<p>jsvc creates a daemon which returns once the service is started. jsvc works on all common Unix-based operating systems
including Linux, Solaris and Mac OS X.
It creates a pid file in the pid directory.
This is a Unix shell script that starts the server as a daemon.
To use jsvc you must install the native binary jsvc from the Apache Commons Daemon project.
The source for this is distributed in the bin directory as <code>jsvc.tar.gz</code>.
Untar it and follow the instructions for building it or download a binary from the Commons Daemon project.
Convenience shell scripts are provided as follows:</p>

<ul>
  <li>start - <code>daemon_start.sh</code></li>
  <li>stop  - <code>daemon_stop.sh</code></li>
</ul>

<p>jsvc is designed to integrate with Unix System 5 initialization scripts (/etc/rc.d).
You can also send Unix signals to it. Meaningful ones for the Ehcache Standalone Server are:
| No   |   Meaning |  Ehcache Standalone Server Effect |
| —– | —— | —– |
| 1    |   HUP     |   Restarts the server. |
| 2    |   INT     |    Interrupts the server. |
| 9    |   KILL    |    The process is killed. The server is not given a chance to shutdown. |
| 15   |   TERM    |    Stops the server, giving it a chance to shutdown in an orderly way. |</p>

<h4 id="executable-jar">Executable jar</h4>
<p>The server is also packaged as an executable jar for developer convenience which will work on all operating systems.
A convenience shell script is provided as follows:</p>

<ul>
  <li>start - startup.sh</li>
</ul>

<p>From the bin directory you can also invoke the following command directly:</p>

<pre>
   <code>unix    - java -jar ../lib/ehcache-standalone-server-0.7.jar 8080 ../war
windows - java -jar ..\lib\ehcache-standalone-server-0.7.jar 8080 ..\war
</code>
</pre>

<h2 id="monitoring">Monitoring</h2>
<p>The CacheServer registers Ehcache MBeans with the platform MBeanServer.
Remote monitoring of the MBeanServer is the responsibility of the Web Container or Application Server vendor.
For example, some instructions for Tomcat are <a href="https://wiki.internet2.edu/confluence/display/CPD/Monitoring+Tomcat+with+JMX">here</a>.
See your Web Container documentation for how to do this for your web container.</p>

<h3 id="remotely-monitoring-the-standalone-server-with-jmx">Remotely Monitoring the Standalone Server with JMX</h3>
<p>The standalone server automatically exposes the MBeanServer on a port 1 higher than the HTTP listening port.</p>

<p>To connect with <code>JConsole</code> simply fire up JConsole, enter the host in the Remote field and port. In the above example that is <code>192.168.1.108:8686</code>.</p>

<p>Then click <code>Connect</code>.
To see the Ehcache MBeans, click on the <code>Mbeans</code> tab and expand the <code>net.sf.ehcache</code> tree node.
You will see something like the following.</p>

<p><img src="/images/documentation/JConsoleExample.png" alt="Ehcache Image" />
<strong>CacheStatistics MBeans in JConsole</strong></p>

<p>Of course, from there you can hook the Cache Server up to your monitoring tool of choice. See <a href="/documentation/2.7/operations/jmx">Management and Monitoring using JMX</a> for more information.</p>

<h2 id="download-">Download <a name="Download" id="Download"></a></h2>
<p>Download the ehcache-standalone-server from <a href="http://sourceforge.net/projects/ehcache/files/ehcache-server">sourceforge.net</a>.</p>

<h2 id="faq-">FAQ <a name="FAQ" id="FAQ"></a></h2>

<h3 id="does-cache-server-work-with-weblogic">Does Cache Server work with WebLogic?</h3>
<p>Yes (we have tested 10.3.2), but the SOAP libraries are not compatible. Either comment out the SOAP service from web.xml or do the following:</p>

<ol>
  <li>Unzip <code>ehcache-server.war</code> to a folder called <code>ehcache</code>.</li>
  <li>
    <p>Remove the following jars from <code>WEB-INF/lib</code>:</p>

    <ul>
      <li>jaxws-rt-2.1.4.jar</li>
      <li>metro-webservices-api-1.2.jar</li>
      <li>metro-webservices-rt-1.2.jar</li>
      <li>metro-webservices-tools-1.2.jar</li>
    </ul>
  </li>
  <li>Deploy the folder to WebLogic.</li>
  <li>Use the soapUI GUI in WebLogic to add a project from http://<hostname>:<port>/ehcache/soap/EhcacheWebServiceEndpoint?wsdl</port></hostname></li>
</ol>

      </article>
    </div>

  </div>

</div>

      </div>
    </div>

    <br/>
<footer class="site-footer">

  <div class="container">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        Related Projects:<br/>
        <a href="http://www.terracotta.org"><img src="/images/Terracotta_Logo_sm.png" style="max-height: 16px;"></a><br/><br/>
        <a href="http://www.quartz-scheduler.org"><img src="/images/logo-quartz-scheduler.png" style="max-height: 20px;"></a>

        <!--
        <ul class="contact-list">
          <li>Ehcache</li>
          <li><a href="mailto:tc-oss@softwareag.com">tc-oss@softwareag.com</a></li>
        </ul>
      -->
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ehcache">
              <i class="fa fa-github"></i> GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/ehcache">
              <i class="fa fa-twitter"></i> Twitter
            </a>
          </li>
          

          
          <li>
            <a href="http://www.facebook.com/Terracotta">
              <i class="fa fa-facebook"></i> Facebook
            </a>
          </li>
          

          
          <li>
            <a href="http://www.linkedin.com/company/terracotta">
              <i class="fa fa-linkedin"></i> LinkedIn
            </a>
          </li>
          
        </ul>
      </div>

    <div class="footer-col  footer-col-3">
      <a href="/downloads/"><i class="fa fa-download"></i> Download Now</a>
      <br/>
      <a href="/documentation/"><i class="fa fa-book"></i> Documentation</a>
      <br/>
      <a href="/community/"><i class="fa fa-users"></i> Join the Community</a>
    </div>

    </div>

    <div class="container-fluid">
        <hr/>
        <em class="copyleft">Ehcache is Open Source and freely available under the Apache 2 License</em>
        <br/>
        <em class="copyright">&copy; Terracotta, Inc., a wholly-owned subsidiary of Software AG USA, Inc. All rights reserved.</em>
    </div>
  </div>

</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>

<!--  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.0/jquery.scrollTo.min.js"/> -->

<script type="text/javascript">
        $('#ehc_mnu_docs').addClass("active");
        $('#').addClass("active");
</script>


  </body>

</html>
