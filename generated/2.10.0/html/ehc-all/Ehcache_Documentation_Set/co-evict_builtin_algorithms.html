<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Built-in Memory Store Eviction Algorithms</title><link rel="Prev" href="co-evict_about_eviction_algorithms.html" title="Previous"><link rel="Next" href="co-evict_plugging_in_your_own_eviction_algorighms.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-evict_builtin_algorithms.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pY04DQ3w45ZPT1fz6HhM5NA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-evict_builtin_algorithms.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/ehcache_all.1.017.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_ehcache_developer_guide.html#wwconnect_header">Ehcache Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-evict_cache_eviction_algorithms.html#wwconnect_header">Cache Eviction Algorithms</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Built-in Memory Store Eviction Algorithms</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_3_35_8_1" class="Heading_3">Built-in Memory Store Eviction Algorithms</div><div id="ww3_12_3_35_8_3_2" class="Body">The idea here is, given a limit on the number of items to cache, how to choose the thing to evict that gives the best result.</div><div id="ww3_12_3_35_8_3_4" class="Body">In 1966 Laszlo Belady showed that the most efficient caching algorithm would be to always discard the information that will not be needed for the longest time in the future. This is a theoretical result that is unimplementable without domain knowledge. The Least Recently Used (LRU) algorithm is often used as a proxy. In general, it works well because of the locality of reference phenomenon and is the default in most caches.</div><div id="ww3_12_3_35_8_3_6" class="Body">A variation of LRU is the default eviction algorithm in <span class="ph">Ehcache</span> .</div><div id="ww3_12_3_35_8_3_8" class="Body"><span class="ph">Ehcache</span> provides three eviction algorithms to choose from for the memory store.</div><div id="ww3_12_3_35_8_3_10_2" class="Section_Title">Least Recently Used (LRU)</div><div id="ww3_12_3_35_8_3_10_4" class="Body">This is the default and is a variation on the Least Frequently Used algorithm.</div><div id="ww3_12_3_35_8_3_10_6" class="Body">The oldest element is the Less Recently Used element. The last-used timestamp is updated when an element is put into the cache or an element is retrieved from the cache with a get call.</div><div id="ww3_12_3_35_8_3_10_8" class="Body">This algorithm takes a random sample of the Elements and evicts the smallest. Using the sample size of 15 elements, empirical testing shows that an Element in the lowest quartile of use is evicted 99% of the time.</div><div id="ww3_12_3_35_8_3_10_10" class="Body">If probabilistic eviction does not suit your application, a true Least Recently Used deterministic algorithm is available by setting <span class="codeph">java -Dnet.sf.ehcache.use.classic.lru=true</span>.</div><div id="ww3_12_3_35_8_3_12_2" class="Section_Title">Least Frequently Used (LFU)</div><div id="ww3_12_3_35_8_3_12_4" class="Body">For each get() call on the element, the number of hits is updated. When a put() call is made for a new element (and assuming that the max limit is reached), the element with least number of hits (the Least Frequently Used element) is evicted.</div><div id="ww3_12_3_35_8_3_12_6" class="Body">If cache-element usage follows a Pareto distribution, this algorithm might give better results than LRU.</div><div id="ww3_12_3_35_8_3_12_8" class="Body">LFU is an algorithm unique to the Ehcache API. It takes a random sample of the Elements and evicts the smallest. Using the sample size of 15 elements, empirical testing shows that an Element in the lowest quartile of use is evicted 99% of the time.</div><div id="ww3_12_3_35_8_3_14_2" class="Section_Title">First In First Out (FIFO)</div><div id="ww3_12_3_35_8_3_14_4" class="Body">Elements are evicted in the same order as they come in. When a put call is made for a new element (and assuming that the max limit is reached for the memory store) the element that was placed first (<span class="emphasis">first-in</span>) in the store is the candidate for eviction <span class="emphasis">first-out</span>.</div><div id="ww3_12_3_35_8_3_14_6" class="Body">This algorithm is used if the use of an element makes it less likely to be used in the future. An example here would be an authentication cache.</div><div id="ww3_12_3_35_8_3_14_8" class="Body">It takes a random sample of the Elements and evicts the smallest. Using the sample size of 15 elements, empirical testing shows that an Element in the lowest quartile of use is evicted 99% of the time.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>