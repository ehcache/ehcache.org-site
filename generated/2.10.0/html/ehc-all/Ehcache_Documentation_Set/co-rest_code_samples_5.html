<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Java Code Samples</title><link rel="Prev" href="co-rest_code_samples_4.html" title="Previous"><link rel="Next" href="co-rest_code_samples_6.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-rest_code_samples_5.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pXWAsveWs5xLZAB9_002f_002fjYCIQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-rest_code_samples_5.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/_ehcache_all.1.188.html#wwconnect_header">Related Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_cache_server_user_guide.html#wwconnect_header">Cache Server User Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-rest_using_the_restful_services.html#wwconnect_header">Using the RESTful Services</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/co-rest_code_samples.html#wwconnect_header">RESTful Code Samples</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Java Code Samples</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_15_3_12_18_8_2" class="Heading_4">Java Code Samples</div><div id="ww3_15_3_12_18_8_4_2_2" class="Section_Title">Create and get a Cache and Entry</div><div id="ww3_15_3_12_18_8_4_2_4" class="Preformatted">mport java.io.InputStream;    <br>import java.io.OutputStream;    <br>import java.net.HttpURLConnection;    <br>import java.net.URL;    <br>/**    <br>* A simple example Java client which uses the built-in java.net.URLConnection.    <br>*    <br>* @author BryantR * @author Greg Luck    <br>*/    <br>public class ExampleJavaClient {    <br>private static String TABLE_COLUMN_BASE =        <br>       "http://localhost:8080/ehcache/rest/tableColumn"; <br>private static String TABLE_COLUMN_ELEMENT =    <br>       "http://localhost:8080/ehcache/rest/tableColumn/1";    <br>/**    <br>* Creates a new instance of EHCacheREST    <br>*/    <br>public ExampleJavaClient() {    <br>}    <br>public static void main(String[] args) {    <br>   URL url;    <br>   HttpURLConnection connection = null;    <br>   InputStream is = null;    <br>   OutputStream os = null;    <br>   int result = 0;    <br>   try {    <br>       //create cache    <br>       URL u = new URL(TABLE_COLUMN_BASE);    <br>       HttpURLConnection urlConnection = <br>              (HttpURLConnection) u.openConnection();  <br>       urlConnection.setRequestMethod("PUT");    <br>       int status = urlConnection.getResponseCode();    <br>       System.out.println("Status: " + status);    <br>       urlConnection.disconnect();    <br>        //get cache    <br>       url = new URL(TABLE_COLUMN_BASE);    <br>       connection = (HttpURLConnection) url.openConnection();    <br>       connection.setRequestMethod("GET");    <br>       connection.connect();    <br>       is = connection.getInputStream(); <br>       byte[] response1 = new byte[4096];    <br>       result = is.read(response1);    <br>       while (result != -1) {    <br>           System.out.write(response1, 0, result);    <br>           result = is.read(response1);    <br>       }    <br>       if (is != null) try {    <br>           is.close();    <br>       } catch (Exception ignore) {    <br>       }        System.out.println("reading cache: " + <br>                   connection.getResponseCode()    <br>               + " " + connection.getResponseMessage());    <br>       if (connection != null) connection.disconnect();    <br>        //create entry    <br>       url = new URL(TABLE_COLUMN_ELEMENT);    <br>       connection = (HttpURLConnection) url.openConnection();    <br>       connection.setRequestProperty("Content-Type", "text/plain");    <br>       connection.setDoOutput(true); <br>       connection.setRequestMethod("PUT"); <br>       connection.connect();    <br>       String sampleData = "Ehcache is way cool!!!";    <br>       byte[] sampleBytes = sampleData.getBytes();    <br>       os = connection.getOutputStream();    <br>       os.write(sampleBytes, 0, sampleBytes.length);    <br>       os.flush();    <br>       System.out.println("result=" + result);    <br>       System.out.println("creating entry: " + connection.getResponseCode()    <br>               + " " + connection.getResponseMessage());    <br>       if (connection != null) connection.disconnect();    <br>        //get entry    <br>       url = new URL(TABLE_COLUMN_ELEMENT); <br>       connection = (HttpURLConnection) url.openConnection(); <br>       connection.setRequestMethod("GET");    <br>       connection.connect();    <br>       is = connection.getInputStream(); <br>       byte[] response2 = new byte[4096];    <br>       result = is.read(response2);    <br>       while (result != -1) {    <br>           System.out.write(response2, 0, result);    <br>           result = is.read(response2);    <br>       }    <br>       if (is != null) try {    <br>           is.close();    <br>       } catch (Exception ignore) {    <br>       }        System.out.println("reading entry: " <br>               + connection.getResponseCode()    <br>               + " " + connection.getResponseMessage());    <br>       if (connection != null) connection.disconnect();    <br>   } catch (Exception e) {    <br>       e.printStackTrace();    <br>   } finally {    <br>       if (os != null) try {    <br>           os.close();    <br>       } catch (Exception ignore) {    <br>       }    <br>       if (is != null) try {    <br>           is.close();    <br>       } catch (Exception ignore) {    <br>       }    <br>       if (connection != null) connection.disconnect();    <br>   }    <br>}    <br>}</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>