<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Storage Tiers</title><link rel="Prev" href="co-top_topology_types.html" title="Previous"><link rel="Next" href="co-arc_automatic_resource_control.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-store_storage_tiers.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pl1lgmlcRlsDJQeGunjT7sQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-store_storage_tiers.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_about_ehcache.html#wwconnect_header">About Ehcache</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Storage Tiers</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_9_14_1" class="Heading_1">Storage Tiers</div><div id="ww3_9_14_3_2_2" class="Body">You can divide a cache or in-memory data set across the following storage areas, referred to as <span class="emphasis">tiers</span>:</div><div id="ww3_9_14_3_2_4_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="inlinetitle">MemoryStore</span> – On-heap memory used to hold cache elements. This tier is subject to Java garbage collection.</div><div id="ww3_9_14_3_2_4_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="inlinetitle">OffHeapStore</span> – Provides overflow capacity to the MemoryStore. Limited in size only by available RAM. Not subject to Java garbage collection (GC). <span class="emphasis">Available only with Terracotta BigMemory products.</span></div><div id="ww3_9_14_3_2_4_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="inlinetitle">DiskStore</span> – Backs up in-memory cache elements and provides overflow capacity to the other tiers.</div><div id="ww3_9_14_3_4_2" class="Section_Title">MemoryStore</div><div id="ww3_9_14_3_4_4" class="Body">The memory store is always enabled and exists in heap memory. It has the following characteristics:</div><div id="ww3_9_14_3_4_6_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>It accepts all data, whether serializable or not.</div><div id="ww3_9_14_3_4_6_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>It is the fastest storage option.</div><div id="ww3_9_14_3_4_6_6_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Is thread safe for use by multiple concurrent threads.</div><div id="ww3_9_14_3_4_8" class="Body">If you use OffHeapStore (available with the BigMemory products only), MemoryStore holds a copy of the hottest subset of data from the OffHeapStore.</div><div id="ww3_9_14_3_4_10" class="Body">All caches specify their maximum in-memory size, in terms of the number of elements, at configuration time.</div><div id="ww3_9_14_3_4_12" class="Body">When an element is added to a cache and it goes beyond its maximum memory size, an existing element is either deleted, if overflow is not enabled, or evaluated for spooling to another tier, if overflow is enabled.</div><div id="ww3_9_14_3_4_14" class="Body">If overflow is enabled, a check for expiry is carried out. If it is expired it is deleted; if not it is spooled.</div><div id="ww3_9_14_3_4_16" class="Body">For information about sizing and configuring the MemoryStore, see “Configuring Memory Store” in the <span class="Citation"> Ehcache </span><span class="Citation"> Configuration Guide</span>.</div><div id="ww3_9_14_3_6_2" class="Section_Title">OffHeapStore</div><div id="ww3_9_14_3_6_4" class="Body">The OffHeapStore extends a cache to memory outside the of the Java heap. This store, which is not subject to Java garbage collection (GC), is limited only by the amount of RAM available. Using OffHeapStore, you can create extremely large local caches. <span class="emphasis">OffHeapStore is only available with the Terracotta BigMemory products.</span></div><div id="ww3_9_14_3_6_6" class="Body">Because off-heap data is stored in bytes, only data that is Serializable is suitable for the OffHeapStore. Any non serializable data overflowing to the OffHeapMemoryStore is simply removed, and a WARNING level log message is emitted.</div><div id="ww3_9_14_3_6_8" class="Body">Since serialization and deserialization take place on putting and getting from the off-heap store, it is theoretically slower than the MemoryStore. This difference, however, is mitigated when garbage collection associated with larger heaps is taken into account.</div><div id="ww3_9_14_3_6_10" class="Body">For the best performance, you should allocate to a cache as much heap memory as possible without triggering GC pauses. Then, use the OffHeapStore to hold the data that cannot fit in heap (without causing GC pauses).</div><div id="ww3_9_14_3_6_12" class="Body">For information about sizing and configuring OffHeapStore, see “Configuring OffHeapStore” in the <span class="Citation">Configuration Guide</span> for your BigMemory product.</div><div id="ww3_9_14_3_8_2" class="Section_Title">DiskStore</div><div id="ww3_9_14_3_8_4" class="Body">The DiskStore provides a thread-safe disk-spooling facility that can be used for either additional storage or persisting data through system restarts.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_14_3_8_6_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_9_14_3_8_6_1_3_1_2" class="Table_Cell">The DiskStore tier is available only for local (standalone) instances of cache. When you use a distributed cache (available only in BigMemory Max), a Terracotta Server Array is used instead of a disk tier.</div></td></tr></table></div><div id="ww3_9_14_3_8_8" class="Body">Only data that is Serializable can be placed in the DiskStore. Writes to and from the disk use ObjectInputStream and the Java serialization mechanism. Any non-serializable data overflowing to the disk store is removed and a NotSerializableException is thrown. Be aware that serialization speed is affected by the size of the objects being serialized and their type. For example, it has been shown that:</div><div id="ww3_9_14_3_8_10_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The serialization time for a Java object consisting of a large Map of String arrays was 126ms, where the serialized size was 349,225 bytes.</div><div id="ww3_9_14_3_8_10_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>The serialization time for a byte[] was 7ms, where the serialized size was 310,232 bytes.</div><div id="ww3_9_14_3_8_12" class="Body">Byte arrays are 20 times faster to serialize, making them a better choice for increasing disk-store performance.</div><div id="ww3_9_14_3_8_14" class="Body">Configuring a disk store is optional. If all caches use only memory and off-heap stores, then there is no need to configure a disk store. This simplifies configuration, and uses fewer threads.</div><div id="ww3_9_14_3_8_16" class="Body">For more information about configuring and sizing the DiskStore, see the “Persistence and Restartability” section in the <span class="Citation">Ehcache Configuration Guide</span>.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>