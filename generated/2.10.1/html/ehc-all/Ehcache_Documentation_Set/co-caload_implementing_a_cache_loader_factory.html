<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Implementing a CacheLoaderFactory and CacheLoader</title><link rel="Prev" href="co-caload_declarative_configuration.html" title="Previous"><link rel="Next" href="co-caload_programmatic_configuration.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-caload_implementing_a_cache_loader_factory.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pflGfA9B_002fIkC_002b3c8xUrnwNw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-caload_implementing_a_cache_loader_factory.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_ehcache_developer_guide.html#wwconnect_header">Ehcache Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-caload_cache_loaders.html#wwconnect_header">Cache Loaders</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Implementing a CacheLoaderFactory and CacheLoader</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_3_23_10_1" class="Heading_3">Implementing a CacheLoaderFactory and CacheLoader</div><div id="ww3_12_3_23_10_3_2" class="Body">CacheLoaderFactory is an abstract factory for creating CacheLoaders. Implementers should provide their own concrete factory, extending this abstract factory. It can then be configured in ehcache.xml. The factory class needs to be a concrete subclass of the abstract factory class CacheLoaderFactory, which is reproduced below:</div><div id="ww3_12_3_23_10_3_4" class="Preformatted">/** <br>* An abstract factory for creating cache loaders. Implementers should provide <br>* their own concrete factory extending this factory. <br>* <br>* There is one factory method for JSR107 Cache Loaders and one for Ehcache ones. <br>* The Ehcache loader is a sub interface of the JSR107 Cache Loader. <br>* <br>* Note that both the JCache and Ehcache APIs also allow the CacheLoader to be set <br>* programmatically. <br>* @author Greg Luck <br>*/ <br>public abstract class CacheLoaderFactory { <br>/** <br>* Creates a CacheLoader using the JSR107 creational mechanism. <br>* This method is called from {@link net.sf.ehcache.jcache.JCacheFactory} <br>* <br>* @param environment the same environment passed into <br>* {@link net.sf.ehcache.jcache.JCacheFactory}. <br>* This factory can extract any properties it needs from the environment. <br>* @return a constructed CacheLoader <br>*/ <br>public abstract net.sf.jsr107cache.CacheLoader createCacheLoader(Map <br>environment); <br>/** <br>* Creates a CacheLoader using the Ehcache configuration mechanism at the time <br>* the associated cache is created. <br>* <br>* @param properties implementation specific properties. These are configured as <br>* comma separated name value pairs in ehcache.xml <br>* @return a constructed CacheLoader <br>*/ <br>public abstract net.sf.ehcache.loader.CacheLoader createCacheLoader(Properties <br>properties); <br>/** <br>* @param cache the cache this extension should hold a reference to, <br>* and to whose lifecycle it should be bound. <br>* @param properties implementation specific properties configured as delimiter <br>*  separated name value pairs in ehcache.xml <br>* @return a constructed CacheLoader <br>*/ <br>public abstract CacheLoader createCacheLoader(Ehcache cache, Properties <br>properties); <br>}</div><div id="ww3_12_3_23_10_3_6" class="Body">The factory creates a concrete implementation of the CacheLoader interface, which is reproduced below. A CacheLoader is bound to the lifecycle of a cache, so that the init() method is called during cache initialization, and dispose() is called on disposal of a cache.</div><div id="ww3_12_3_23_10_3_8" class="Preformatted">/** <br>* Extends JCache CacheLoader with load methods that take an argument in addition <br>* to a key <br>* @author Greg Luck <br>*/ <br>public interface CacheLoader extends net.sf.jsr107cache.CacheLoader { <br>/** <br>* Load using both a key and an argument. <br>* <br>* JCache will call through to the load(key) method, rather than this method, <br>* where the argument is null. <br>* <br>* @param key      the key to load the object for <br>* @param argument can be anything that makes sense to the loader <br>* @return the Object loaded <br>* @throws CacheException <br>*/ <br>Object load(Object key, Object argument) throws CacheException; <br>/** <br>* Load using both a key and an argument. <br>* <br>* JCache will use the loadAll(key) method where the argument is null. <br>* <br>* @param keys     the keys to load objects for <br>* @param argument can be anything that makes sense to the loader <br>* @return a map of Objects keyed by the collection of keys passed in. <br>* @throws CacheException <br>*/ <br>Map loadAll(Collection keys, Object argument) throws CacheException; <br>/** <br>* Gets the name of a CacheLoader <br>* <br>* @return the name of this CacheLoader <br>*/ <br>String getName(); <br>/** <br>* Creates a clone of this extension. This method will only be called by Ehcache <br>* before a cache is initialized. <br>* <br>* Implementations should throw CloneNotSupportedException if they do not support <br>* clone, but that will stop them from being used with defaultCache. <br>* <br>* @return a clone <br>* @throws CloneNotSupportedException if the extension could not be cloned. <br>*/ <br>public CacheLoader clone(Ehcache cache) throws CloneNotSupportedException; <br>/** <br>* Notifies providers to initialise themselves. <br>* <br>* This method is called during the Cache's initialise method after it has changed <br>* it's status to alive. Cache operations are legal in this method. <br>* <br>* @throws net.sf.ehcache.CacheException <br>*/ <br>void init(); <br>/** <br>* Providers may be doing all sorts of exotic things and need to be able to clean <br>* up on dispose. <br>* <br>* Cache operations are illegal when this method is called. The cache itself is <br>* partly disposed when this method is called. <br>* <br>* @throws net.sf.ehcache.CacheException <br>*/ <br>void dispose() throws net.sf.ehcache.CacheException; <br>/** <br>* @return the status of the extension <br>*/ <br>public Status getStatus(); <br>}</div><div id="ww3_12_3_23_10_3_10" class="Body">The implementations need to be placed in the classpath accessible to ehcache. For details on how the loading of these classes will be done, see <span class="heading-page"><a href="../Ehcache_Documentation_Set/to-class_loading.html#wwconnect_header" title="Class Loading">Class Loading</a></span>.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>