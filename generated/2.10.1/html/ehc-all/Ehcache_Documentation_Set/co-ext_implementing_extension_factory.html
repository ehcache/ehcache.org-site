<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Implementing a Cache Extension Factory and Cache Extension</title><link rel="Prev" href="co-ext_declarative_configuration.html" title="Previous"><link rel="Next" href="co-ext_programmatic_configuration.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/ehcache-webhelp/co-ext_implementing_extension_factory.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pPlFnTAyWChtmx8KAvtEYVw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/ehcache-webhelp/co-ext_implementing_extension_factory.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-title_ehcache_developer_guide.html#wwconnect_header">Ehcache Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-ext_cache_extensions.html#wwconnect_header">Cache Extensions</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Implementing a Cache Extension Factory and Cache Extension</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_3_33_10_1" class="Heading_3">Implementing a Cache Extension Factory and Cache Extension</div><div id="ww3_12_3_33_10_3_2" class="Body">A CacheExtensionFactory is an abstract factory for creating cache extension. Implementers should provide their own concrete factory, extending this abstract factory. It can then be configured in ehcache.xml. The factory class needs to be a concrete subclass of the abstract factory class CacheExtensionFactory, which is reproduced below:</div><div id="ww3_12_3_33_10_3_4" class="Preformatted">/** <br>* An abstract factory for creating CacheExtensions. Implementers should <br>* provide their own concrete factory extending this factory. <br>* It can then be configured in ehcache.xml. <br>* <br>*/ <br>public abstract class CacheExtensionFactory { <br>/** <br>* @param cache the cache this extension should hold a reference to, and to <br>* whose lifecycle it should be bound. <br>* @param properties implementation specific properties configured as <br>* delimiter separated name value pairs in ehcache.xml <br>*/ <br>public abstract CacheExtension createCacheExtension(Ehcache cache, <br>Properties properties); <br>}</div><div id="ww3_12_3_33_10_3_6" class="Body">The factory creates a concrete implementation of the <span class="codeph">CacheExtension</span> interface, which is reproduced below:</div><div id="ww3_12_3_33_10_3_8" class="Preformatted">/** <br>* This is a general purpose mechanism to allow generic extensions to a Cache. <br>* <br>* CacheExtensions are tied into the Cache lifecycle. For that reason this <br>* interface has the lifecycle methods. <br>* <br>* CacheExtensions are created using the CacheExtensionFactory which has a <br>* <span class="codeph">createCacheCacheExtension()</span> method which takes as a parameter a Cache and <br>* properties. It can thus call back into any public method on Cache, including, <br>* of course, the load methods. <br>* <br>* CacheExtensions are suitable for timing services, where you want to create a <br>* timer to perform cache operations. The other way of adding Cache behaviour is <br>* to decorate a cache. <br>* See {@link net.sf.ehcache.constructs.blocking.BlockingCache} <br>* for an example of how to do this. <br>* <br>* Because a CacheExtension holds a reference to a Cache, the CacheExtension <br>* can do things such as registering a CacheEventListener or even a <br>* CacheManagerEventListener, all from within a CacheExtension, <br>* creating more opportunities for customisation. <br>* <br>*/ <br>public interface CacheExtension { <br>/** <br>* Notifies providers to initialise themselves. <br>* <br>* This method is called during the Cache's initialise method after it <br>* has changed its status to alive. Cache operations are legal in <br>* this method. <br>* <br>* @throws CacheException <br>*/ <br>void init(); <br>/** <br>* Providers may be doing all sorts of exotic things and need to be able to <br>* clean up on dispose. <br>* <br>* Cache operations are illegal when this method is called. The cache <br>* itself is partly disposed when this method is called. <br>* <br>* @throws CacheException <br>*/ <br>void dispose() throws CacheException; <br>/** <br>* Creates a clone of this extension. This method will only be called by <br>* Ehcache before a cache is initialized. <br>* <br>* Implementations should throw CloneNotSupportedException if they do not <br>* support clone but that will stop them from being used with defaultCache. <br>* <br>* @return a clone <br>* @throws CloneNotSupportedException if the extension could not be cloned. <br>*/ <br>public CacheExtension clone(Ehcache cache) throws CloneNotSupportedException; <br>/** <br>* @return the status of the extension <br>*/ <br>public Status getStatus(); <br>}</div><div id="ww3_12_3_33_10_3_10" class="Body">The implementations need to be placed in the classpath accessible to ehcache. For details on how the loading of these classes will be done, see <span class="heading-page"><a href="../ehcache-webhelp/to-class_loading.html#wwconnect_header" title="Class Loading">Class Loading</a></span>.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>