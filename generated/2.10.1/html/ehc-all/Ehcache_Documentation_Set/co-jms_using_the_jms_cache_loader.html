<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Using the JMSCacheLoader</title><link rel="Prev" href="co-jms_ehcache_replication_and_external_publishers_4.html" title="Previous"><link rel="Next" href="co-jms_configuring_clients_for_message_queue_reliability.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-jms_using_the_jms_cache_loader.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN_002bAyiM_002bGgvL_002fNi31sz8AXWQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-jms_using_the_jms_cache_loader.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/_ehcache_all.1.187.html#wwconnect_header">Related Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_ehcache_replication_guide.html#wwconnect_header">Ehcache Replication Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-jms_replicated_caching_using_jms.html#wwconnect_header">Replicated Caching Using JMS</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Using the JMSCacheLoader</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_15_5_13_10_1" class="Heading_3">Using the JMSCacheLoader</div><div id="ww3_15_5_13_10_3_2" class="Body">The JMSCacheLoader is a CacheLoader which loads objects into the cache by sending requests to a JMS Queue.</div><div id="ww3_15_5_13_10_3_4" class="Body">The loader places an ObjectMessage of type JMSEventMessage on the getQueue with an Action of type GET.</div><div id="ww3_15_5_13_10_3_6" class="Body">It is configured with the following String properties, loaderArgument.</div><div id="ww3_15_5_13_10_3_8" class="Body">The defaultLoaderArgument, or the loaderArgument if specified on the load request. To work with the JMSCacheManagerPeerProvider this should be the name of the cache to load from. For custom responders, it can be anything which has meaning to the responder.</div><div id="ww3_15_5_13_10_3_10" class="Body">A queue responder will respond to the request. You can either create your own or use the one built-into the JMSCacheManagerPeerProviderFactory, which attempts to load the queue from its cache.</div><div id="ww3_15_5_13_10_3_12" class="Body">The JMSCacheLoader uses JNDI to maintain message queue independence. Refer to the manual for full configuration examples using ActiveMQ and Open Message Queue.</div><div id="ww3_15_5_13_10_3_14" class="Body">It is configured as per the following example:</div><div id="ww3_15_5_13_10_3_16" class="Preformatted">&lt;cacheLoaderFactory class="net.sf.ehcache.distribution.jms.JMSCacheLoaderFactory"<br>  properties="initialContextFactoryName=com.sun.jndi.fscontext.RefFSContextFactory,<br>  providerURL=file:///tmp,<br>  replicationTopicConnectionFactoryBindingName=MyConnectionFactory,<br>  replicationTopicBindingName=ehcache,<br>  getQueueConnectionFactoryBindingName=queueConnectionFactory,<br>  getQueueBindingName=ehcacheGetQueue,<br>  timeoutMillis=20000<br>  defaultLoaderArgument=/&gt;</div><div id="ww3_15_5_13_10_3_18" class="Body">Valid properties are:</div><div id="ww3_15_5_13_10_3_20_2_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>initialContextFactoryName (mandatory) - the name of the factory used to create the message queue initial context.</div><div id="ww3_15_5_13_10_3_20_2_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>providerURL (mandatory) - the JNDI configuration information for the service provider to use.</div><div id="ww3_15_5_13_10_3_20_2_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>getQueueConnectionFactoryBindingName (mandatory) - the JNDI binding name for the QueueConnectionFactory</div><div id="ww3_15_5_13_10_3_20_2_8" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>getQueueBindingName (mandatory) - the JNDI binding name for the queue name used to do make requests.</div><div id="ww3_15_5_13_10_3_20_2_10" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>defaultLoaderArgument - (optional) - an application specific argument. If not supplied as a cache.load() parameter this default value will be used. The argument is passed in the JMS request as a StringProperty called loaderArgument.</div><div id="ww3_15_5_13_10_3_20_2_12" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>timeoutMillis - time in milliseconds to wait for a reply.</div><div id="ww3_15_5_13_10_3_20_2_14" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>securityPrincipalName - the JNDI java.naming.security.principal</div><div id="ww3_15_5_13_10_3_20_2_16" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>securityCredentials - the JNDI java.naming.security.credentials</div><div id="ww3_15_5_13_10_3_20_2_18" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>urlPkgPrefixes - the JNDI java.naming.factory.url.pkgs</div><div id="ww3_15_5_13_10_3_20_2_20" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>userName - the user name to use when creating the TopicConnection to the Message Queue</div><div id="ww3_15_5_13_10_3_20_2_22" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>password - the password to use when creating the TopicConnection to the Message Queue</div><div id="ww3_15_5_13_10_3_20_2_24" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>acknowledgementMode - the JMS Acknowledgement mode for both publisher and subscriber. The available choices are AUTO_ACKNOWLEDGE, DUPS_OK_ACKNOWLEDGE and SESSION_TRANSACTED. The default is AUTO_ACKNOWLEDGE.</div><div id="ww3_15_5_13_10_3_22_2" class="Section_Title">Example Configuration Using Active MQ</div><div id="ww3_15_5_13_10_3_22_4" class="Preformatted">&lt;cache name="sampleCacheNorep"<br>  maxEntriesLocalHeap="1000"<br>  eternal="false"<br>  timeToIdleSeconds="1000"<br>  timeToLiveSeconds="1000"<br>  overflowToDisk="false"&gt;<br>  &lt;cacheEventListenerFactory<br>   class="net.sf.ehcache.distribution.jms.JMSCacheReplicatorFactory"<br>   properties="replicateAsynchronously=false, replicatePuts=false,<br>   replicateUpdates=false, replicateUpdatesViaCopy=false,<br>   replicateRemovals=false, loaderArgument=sampleCacheNorep"<br>   propertySeparator=","/&gt;<br>&lt;cacheLoaderFactory <br>  class="net.sf.ehcache.distribution.jms.JMSCacheLoaderFactory"<br>  properties="initialContextFactoryName=net.sf.ehcache.distribution.jms.<br>       TestActiveMQInitialContextFactory,<br>       providerURL=tcp://localhost:61616,<br>       replicationTopicConnectionFactoryBindingName=topicConnectionFactory,<br>       getQueueConnectionFactoryBindingName=queueConnectionFactory,<br>       replicationTopicBindingName=ehcache,<br>       getQueueBindingName=ehcacheGetQueue,<br>       timeoutMillis=10000"/&gt;<br>&lt;/cache&gt;</div><div id="ww3_15_5_13_10_3_24_2" class="Section_Title">Example Configuration Using Open MQ</div><div id="ww3_15_5_13_10_3_24_4" class="Preformatted">&lt;cache name="sampleCacheNorep"<br>  maxEntriesLocalHeap="1000"<br>  eternal="false"<br>  timeToIdleSeconds="100000"<br>  timeToLiveSeconds="100000"<br>  overflowToDisk="false"&gt;<br>  &lt;cacheEventListenerFactory<br>    class="net.sf.ehcache.distribution.jms.JMSCacheReplicatorFactory"<br>    properties="replicateAsynchronously=false, replicatePuts=false,<br>                replicateUpdates=false, replicateUpdatesViaCopy=false,<br>                replicateRemovals=false"<br>                propertySeparator=","/&gt;<br>  &lt;cacheLoaderFactory <br>    class="net.sf.ehcache.distribution.jms.JMSCacheLoaderFactory"<br>    properties="initialContextFactoryName=com.sun.jndi.fscontext.RefFSContextFactory,<br>                providerURL=file:///tmp,<br>                replicationTopicConnectionFactoryBindingName=MyConnectionFactory,<br>                replicationTopicBindingName=ehcache,<br>                getQueueConnectionFactoryBindingName=queueConnectionFactory,<br>                getQueueBindingName=ehcacheGetQueue,<br>                timeoutMillis=10000,<br>                userName=test,<br>                password=test"/&gt;<br>&lt;/cache&gt;</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>