<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Cache Persistence Implementation</title><link rel="Prev" href="co-persist_about_persistence_and_restart.html" title="Previous"><link rel="Next" href="co-persist_config_examples.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-persist_cache_persistence_implementation.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pKK3zf2InNf6Q_002fvZvjOyiZQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-persist_cache_persistence_implementation.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_ehcache_configuration_guide.html#wwconnect_header">Ehcache Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-persist_configuring_persistance_and_restart.html#wwconnect_header">Configuring Restartability and Persistence</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Cache Persistence Implementation</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_5_15_8_1" class="Heading_3">Cache Persistence Implementation</div><div id="ww3_12_5_15_8_3_2" class="Body">Ehcache has a RestartStore which provides fast restartability and options for cache persistence. The RestartStore implements an on-disk mirror of the in-memory cache. After any restart, data that was last in the cache will automatically load from disk into the RestartStore, and from there the data will be available to the cache.</div><div id="ww3_12_5_15_8_3_4" class="Body">Data persistence is configured by adding the <span class="parmname">&lt;persistence&gt;</span> sub-element to a cache configuration. The <span class="parmname">&lt;persistence&gt;</span> sub-element includes two attributes: <span class="parmname">strategy</span> and <span class="parmname">synchronousWrites</span>.</div><div id="ww3_12_5_15_8_3_6_2" class="Section_Title">Strategy Options</div><div id="ww3_12_5_15_8_3_6_4" class="Body">The options for the <span class="parmname">strategy</span> attribute are:</div><div id="ww3_12_5_15_8_3_6_6_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="codeph">"localRestartable"</span> — Enables the RestartStore and copies all cache entries (on-heap and/or off-heap) to disk. This option provides fast restartability with fault tolerant cache persistence on disk. <span class="emphasis">This option is available for BigMemory Go only.</span> For more information about this strategy, see the <span class="Citation">BigMemory Configuration Guide</span> on the <span class="external"><a href="http://terracotta.org/documentation/" target="external_window">Terracotta Documentation website</a></span>.</div><div id="ww3_12_5_15_8_3_6_6_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="codeph">"localTempSwap"</span> — Enables temporary local disk usage. This option provides an extra tier for storage during cache operation, but this disk storage is not persisted. After a restart, the disk tier is cleared of any cache data.</div><div id="ww3_12_5_15_8_3_6_6_6_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="codeph">"none"</span> — Does not offload data to disk. With this option, all of the working data is kept in memory only. This is the default mode.</div><div id="ww3_12_5_15_8_3_8_2" class="Section_Title">Synchronous Writes Options</div><div id="ww3_12_5_15_8_3_8_4" class="Body">If the <span class="parmname">strategy</span> attribute is set to "localRestartable", then the <span class="parmname">synchronousWrites</span> attribute can be configured. The options for <span class="parmname">synchronousWrites</span> are:</div><div id="ww3_12_5_15_8_3_8_6_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="inlinetitle">synchronousWrites="false"</span> — This option specifies that an eventually consistent record of the data is kept on disk at all times. Writes to disk happen when efficient, and cache operations proceed without waiting for acknowledgment of writing to disk. After a restart, the data is recovered as it was when last synced. This option is faster than <span class="codeph">synchronousWrites="true"</span>, but after a crash, the last 2-3 seconds of written data may be lost.</div><div id="ww3_12_5_15_8_3_8_6_2_5" class="List_1_Continued">If not specified, the default for <span class="codeph">synchronousWrites</span> is "false".</div><div id="ww3_12_5_15_8_3_8_6_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="inlinetitle">synchronousWrites="true"</span> — This option specifies that a fully consistent record of the data is kept on disk at all times. As changes are made to the data set, they are synchronously recorded on disk. The write to disk happens before a return to the caller. After a restart, the data is recovered exactly as it was before shutdown. This option is slower than <span class="parmname">synchronousWrites="false"</span>, but after a crash, it provides full data consistency.</div><div id="ww3_12_5_15_8_3_8_6_4_5" class="List_1_Continued">For transaction caching with <span class="codeph">synchronousWrites</span>, soft locks are used to protect access. If there is a crash in the middle of a transaction, then upon recovery the soft locks are cleared on next access.</div><div id="ww3_12_5_15_8_3_10_2" class="Section_Title">DiskStore Path</div><div id="ww3_12_5_15_8_3_10_4" class="Body">he path to the directory where any required disk files will be created is configured with the <span class="parmname">&lt;diskStore&gt;</span> sub-element of the Ehcache configuration.For "localTempSwap", if the DiskStore path is not specified, a default path is used for the disk storage tier, and the default path will be auto-resolved in the case of a conflict with another CacheManager.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>