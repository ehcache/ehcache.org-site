<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Eviction When Using CacheManager-Level Storage</title><link rel="Prev" href="co-size_builtin_resizing_computations.html" title="Previous"><link rel="Next" href="to-life_managing_data_life.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/ehcache-webhelp/co-size_eviction_on_cache_manager_level_store.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pLQj2KfT5S7Od_002fUhBcwNWMA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/ehcache-webhelp/co-size_eviction_on_cache_manager_level_store.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-title_ehcache_configuration_guide.html#wwconnect_header">Ehcache Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-size_sizing_storage_tiers.html#wwconnect_header">Sizing Storage Tiers</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Eviction When Using CacheManager-Level Storage</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_5_11_16_1" class="Heading_3">Eviction When Using CacheManager-Level Storage</div><div id="ww3_12_5_11_16_3_2" class="Body">When a CacheManager-level storage pool is exhausted, a cache is selected on which to perform eviction to recover pool space. The eviction from the selected cache is performed using the cache's configured eviction algorithm (LRU, LFU, etc...). The cache from which eviction is performed is selected using the "minimal eviction cost" algorithm described below:</div><div id="ww3_12_5_11_16_3_4" class="Preformatted"> eviction-cost = mean-entry-size * drop-in-hit-rate</div><div id="ww3_12_5_11_16_3_6" class="Body">Eviction cost is defined as the increase in bytes requested from the underlying SOR (System of Record, e.g., database) per unit time used by evicting the requested number of bytes from the cache.</div><div id="ww3_12_5_11_16_3_8" class="Body">If we model the hit distribution as a simple power-law then:</div><div id="ww3_12_5_11_16_3_10" class="Preformatted"> P(hit n'th element) ~ 1/n^{alpha}</div><div id="ww3_12_5_11_16_3_12" class="Body">In the continuous limit, this means the total hit rate is proportional to the integral of this distribution function over the elements in the cache. The change in hit rate due to an eviction is then the integral of this distribution function between the initial size and the final size. Assuming that the eviction size is small compared to the overall cache size, we can model this as:</div><div id="ww3_12_5_11_16_3_14" class="Preformatted"> drop ~ access * 1/x^{alpha} * Delta(x)</div><div id="ww3_12_5_11_16_3_16" class="Body">where "access" is the overall access rate (hits + misses), and x is a unit-less measure of the "fill level" of the cache. Approximating the fill level as the ratio of hit rate to access rate, and substituting in to the eviction-cost expression, we get:</div><div id="ww3_12_5_11_16_3_18" class="Preformatted"> eviction-cost = mean-entry-size * access * 1/(hits/access)^{alpha} <br>                     * (eviction / (byteSize / (hits/access)))</div><div id="ww3_12_5_11_16_3_20" class="Body">Simplifying:</div><div id="ww3_12_5_11_16_3_22" class="Preformatted"> eviction-cost = (byteSize / countSize) * access * 1/(h/A)^{alpha} <br>                     * (eviction * hits)/(access * byteSize) <br> eviction-cost = (eviction * hits) / (countSize * (hits/access)^{alpha})</div><div id="ww3_12_5_11_16_3_24" class="Body">Removing the common factor of "eviction", which is the same in all caches, lead us to evicting from the cache with the minimum value of:</div><div id="ww3_12_5_11_16_3_26" class="Preformatted"> eviction-cost = (hits / countSize) / (hits/access)^{alpha}</div><div id="ww3_12_5_11_16_3_28" class="Body">When a cache has a zero hit-rate (it is in a pure loading phase), we deviate from this algorithm and allow the cache to occupy 1/nth of the pool space, where "n" is the number of caches using the pool. Once the cache starts to be accessed, we re-adjust to match the actual usage pattern of that cache.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>