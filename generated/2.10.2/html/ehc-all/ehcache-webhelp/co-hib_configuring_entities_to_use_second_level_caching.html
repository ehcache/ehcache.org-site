<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Configuring Hibernate Entities to use Second-Level Caching</title><link rel="Prev" href="co-hib_enable_second_level_cache_settings.html" title="Previous"><link rel="Next" href="co-hib_configuring_ehcache_settings.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/ehcache-webhelp/co-hib_configuring_entities_to_use_second_level_caching.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pbwcSGGJ1RBwfSEXqNP4G0Q" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/ehcache-webhelp/co-hib_configuring_entities_to_use_second_level_caching.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/_ehcache_all.1.187.html#wwconnect_header">Related Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-title_ehcache_integrations.html#wwconnect_header">Integrations</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-hib_using_ehcache_with_hibernate.html#wwconnect_header">Using Ehcache with Hibernate</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Configuring Hibernate Entities to use Second-Level Caching</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_15_7_7_15_1" class="Heading_3">Configuring Hibernate Entities to use Second-Level Caching</div><div id="ww3_15_7_7_15_2_2" class="Body">In addition to configuring the Hibernate second-level cache provider, Hibernate must also be told to enable caching for entities, collections, and queries. For example, the mapping entry for a domain object called, <span class="Keyword">com.somecompany.someproject.domain.Country</span>, looks something like this:</div><div id="ww3_15_7_7_15_2_4" class="Preformatted">&lt;hibernate-mapping&gt; <br>&lt;class <br>name="com.somecompany.someproject.domain.Country" <br>table="ut_Countries" <br>dynamic-update="false" <br>dynamic-insert="false" <br>&gt; <br>... <br>&lt;/class&gt; <br>&lt;/hibernate-mapping&gt;</div><div id="ww3_15_7_7_15_2_6" class="Body">To enable caching for this domain object, you add the following element to its mapping entry:</div><div id="ww3_15_7_7_15_2_8" class="Preformatted">&lt;cache usage="read-write|nonstrict-read-write|read-only" /&gt;</div><div id="ww3_15_7_7_15_2_10" class="Body">For example:</div><div id="ww3_15_7_7_15_2_12" class="Preformatted">&lt;hibernate-mapping&gt; <br>&lt;class <br>name="com.somecompany.someproject.domain.Country" <br>table="ut_Countries" <br>dynamic-update="false" <br>dynamic-insert="false" <br>&gt; <br> &lt;cache usage="read-write" /&gt; <br>... <br>&lt;/class&gt; <br>&lt;/hibernate-mapping&gt;</div><div id="ww3_15_7_7_15_2_14" class="Body">You can also enable caching using the @Cache annotation as shown below.</div><div id="ww3_15_7_7_15_2_16" class="Preformatted">@Entity <br>@Cache(usage = CacheConcurrencyStrategy.READ_WRITE) <br>public class Country { <br>... <br>}</div><div id="ww3_15_7_7_15_2_18_2" class="Section_Title">Definition of the Different Cache Strategies</div><div id="ww3_15_7_7_15_2_18_4_2_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="parmname">read-only</span> - Caches data that is never updated.</div><div id="ww3_15_7_7_15_2_18_4_4_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="parmname">nonstrict-read-write</span> - Caches data that is sometimes updated without ever locking the cache. If concurrent access to an item is possible, this concurrency strategy makes no guarantee that the item returned from the cache is the latest version available in the database. Configure your cache timeout accordingly.</div><div id="ww3_15_7_7_15_2_18_4_6_3" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="parmname">read-write</span> - Caches data that is sometimes updated while maintaining the semantics of "read committed" isolation level. If the database is set to "repeatable read," this concurrency strategy almost maintains the semantics. Repeatable read isolation is compromised in the case of concurrent writes.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>