<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Adding JDBC caching to DAO/DAL</title><link rel="Prev" href="co-jdbc_about_jdbc_caching.html" title="Previous"><link rel="Next" href="co-jdbc_sample_code.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/ehcache-webhelp/co-jdbc_adding_jdbc_to_dao_dal.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pSPNT_002fTkChwOccEPn_002fFP_002bwA" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/ehcache-webhelp/co-jdbc_adding_jdbc_to_dao_dal.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/_ehcache_all.1.187.html#wwconnect_header">Related Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-title_ehcache_integrations.html#wwconnect_header">Integrations</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-jdbc_using_ehcache_with_jdbc.html#wwconnect_header">Using Ehcache with JDBC</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Adding JDBC caching to DAO/DAL</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_15_7_19_7_1" class="Heading_3">Adding JDBC caching to DAO/DAL</div><div id="ww3_15_7_19_7_2_2" class="Body">If your application already has a Data Access Object/Data Access Layer (DAO/DAL), this is a natural place to add caching. To add caching, follow these steps:</div><div id="ww3_15_7_19_7_2_4_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Identify methods which can be cached.</div><div id="ww3_15_7_19_7_2_4_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Instantiate a cache and add a member variable to your DAO to hold a reference to it.</div><div id="ww3_15_7_19_7_2_4_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Put and get values from the cache.</div><div id="ww3_15_7_19_7_2_6_2" class="Section_Title">Identifying methods which can be cached</div><div id="ww3_15_7_19_7_2_6_4" class="Body">Normally, you will want to cache the following kinds of method calls:</div><div id="ww3_15_7_19_7_2_6_6_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Any method which retrieves entities by an Id.</div><div id="ww3_15_7_19_7_2_6_6_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Any queries which can be tolerate some inconsistent or out of date data.</div><div id="ww3_15_7_19_7_2_6_8" class="Body">Example methods that are commonly cacheable:</div><div id="ww3_15_7_19_7_2_6_10" class="Preformatted">public V getById(final K id); <br>public Collection findXXX(...);</div><div id="ww3_15_7_19_7_2_8_2" class="Section_Title">Instantiate a cache and add a member variable</div><div id="ww3_15_7_19_7_2_8_4" class="Body">Your DAO is probably already being managed by Spring or Guice, so simply add a setter method to your DAO such as <span class="codeph">setCache(Cache cache)</span>. Configure the cache as a bean in your Spring or Guice config, and then use the frameworks injection methodology to inject an instance of the cache.</div><div id="ww3_15_7_19_7_2_8_6" class="Body">If you are not using a DI framework such as Spring or Guice, then you will need to instantiate the cache during the bootstrap of your application. As your DAO layer is being instantiated, pass the cache instance to it.</div><div id="ww3_15_7_19_7_2_10_2" class="Section_Title">Put and get values from the cache</div><div id="ww3_15_7_19_7_2_10_4" class="Body">Now that your DAO/DAL has a cache reference, you can start to use it. You will want to consider using the cache using one of two standard cache access patterns:</div><div id="ww3_15_7_19_7_2_10_6_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>cache-aside</div><div id="ww3_15_7_19_7_2_10_6_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>cache-as-sor</div><div id="ww3_15_7_19_7_2_10_8" class="Body">You can read more about these in "Cache Usage Patterns" in the <span class="Citation">Ehcache Developer Guide</span>.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>