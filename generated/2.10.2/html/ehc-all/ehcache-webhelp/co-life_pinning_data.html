<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Pinning Data</title><link rel="Prev" href="co-life_setting_expiration.html" title="Previous"><link rel="Next" href="co-life_affect_on_flushing_and_eviction.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/ehcache-webhelp/co-life_pinning_data.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pKaD8NpNHqjR3quX9di7G2w" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/ehcache-webhelp/co-life_pinning_data.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-title_ehcache_configuration_guide.html#wwconnect_header">Ehcache Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-life_managing_data_life.html#wwconnect_header">Managing Data Life</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Pinning Data</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_5_13_10_1" class="Heading_3">Pinning Data</div><div id="ww3_12_5_13_10_3_2_2" class="Body">Without pinning, expired cache entries can be flushed and eventually evicted, and even most non-expired elements can also be flushed and evicted as well, if resource limitations are reached. Pinning gives per-cache control over whether data can be evicted from <span class="ph">Ehcache</span> .</div><div id="ww3_12_5_13_10_3_2_4" class="Body">Data that should remain in memory can be pinned. You cannot pin individual entries, only an entire cache. As described in the following topics, there are two types of pinning, depending upon whether the pinning configuration should take precedence over resource constraints or the other way around.</div><div id="ww3_12_5_13_10_3_4_2" class="Section_Title">Configuring Pinning</div><div id="ww3_12_5_13_10_3_4_4" class="Body">Entire caches can be pinned using the <span class="parmname">pinning</span> element in the Ehcache configuration. This element has a required attribute (<span class="parmname">store</span>) to specify how the pinning will be accomplished.</div><div id="ww3_12_5_13_10_3_4_6" class="Body">The <span class="parmname">store</span> attribute can have either of the following values:</div><div id="ww3_12_5_13_10_3_4_8_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>inCache – Data is pinned in the cache, in any tier in which cache data is stored. The tier is chosen based on performance-enhancing efficiency algorithms. Unexpired entries can never be evicted.</div><div id="ww3_12_5_13_10_3_4_8_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>localMemory – Data is pinned to the memory store. Entries are evicted only in the event that the store's configured size is exceeded.</div><div id="ww3_12_5_13_10_3_4_10" class="Body">For example, the following cache is configured to pin its entries:</div><div id="ww3_12_5_13_10_3_4_12" class="Preformatted">&lt;cache name="Cache1" ... &gt; <br>     &lt;pinning store="inCache" /&gt; <br>&lt;/cache&gt;</div><div id="ww3_12_5_13_10_3_4_14" class="Body">The following cache is configured to pin its entries to heap only:</div><div id="ww3_12_5_13_10_3_4_16" class="Preformatted">&lt;cache name="Cache2" ... &gt; <br>     &lt;pinning store="localMemory" /&gt; <br>&lt;/cache&gt;</div><div id="ww3_12_5_13_10_3_6_2" class="Section_Title">Pinning and Cache Sizing</div><div id="ww3_12_5_13_10_3_6_4" class="Body">The interaction of the pinning configuration with the cache sizing configuration depends upon which pinning option is used.</div><div id="ww3_12_5_13_10_3_6_6" class="Body">For <span class="parmname">inCache</span> pinning, the pinning setting takes priority over the configured cache size. Elements resident in a cache with this pinning option cannot be evicted if they have not expired. This type of pinned cache is not eligible for eviction at all, and <span class="parmname">maxEntriesInCache</span> should not be configured for this cache.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_12_5_13_10_3_6_8_1_3_1_1_1" class="important"><span style="font-weight: bold">Important:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_12_5_13_10_3_6_8_1_3_1_2" class="Table_Cell">Potentially, pinned caches could grow to an unlimited size. Caches should never be pinned unless they are designed to hold a limited amount of data (such as reference data) or their usage and expiration characteristics are understood well enough to conclude that they cannot cause errors.</div></td></tr></table></div><div id="ww3_12_5_13_10_3_6_10" class="Body">For <span class="parmname">localMemory</span> pinning, the configured cache size takes priority over the pinning setting. <span class="parmname">localMemory</span> pinning should be used for optimization, to keep data in heap memory, unless or until the tier becomes too full. If the number of entries surpasses the configured size, entries will be evicted. For example, in the following cache the <span class="parmname">maxEntriesLocalHeap</span> and <span class="parmname">maxBytesLocalOffHeap</span> settings override the pinning configuration. (Off-heap storage is only available in the Terracotta BigMemory products.)</div><div id="ww3_12_5_13_10_3_6_12" class="Preformatted">&lt;cache name="myCache" <br>     maxEntriesLocalHeap="10000" <br>     maxBytesLocalOffHeap="8g" <br>     ... &gt; <br>    &lt;pinning store="localMemory" /&gt; <br>&lt;/cache&gt;</div><div id="ww3_12_5_13_10_3_8_2" class="Section_Title">Scope of Pinning</div><div id="ww3_12_5_13_10_3_8_4" class="Body">Pinning achieved programmatically will not be persisted — after a restart the pinned entries are no longer pinned.</div><div id="ww3_12_5_13_10_3_10_2" class="Section_Title">Explicitly Removing Data from a Pinned Cache</div><div id="ww3_12_5_13_10_3_10_4" class="Body">To unpin all of a cache's pinned entries, clear the cache. Specific entries can be removed from a cache using Cache.remove(). To empty the cache, Cache.removeAll(). If the cache itself is removed (Cache.dispose() or CacheManager.removeCache()), then any data still remaining in the cache is also removed locally. However, that remaining data is <span class="emphasis">not</span> removed from disk (if localRestartable).</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>