<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Sizing Examples</title><link rel="Prev" href="co-size_pooling_resources.html" title="Previous"><link rel="Next" href="co-size_pinning_and_size_limits.html" title="Next"><link rel="StyleSheet" href="css/_ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/ehcache-webhelp/co-size_sizing_examples.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pGCa7j8C9QM3aCgzuPkqaOg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/ehcache-webhelp/co-size_sizing_examples.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-title_ehcache_configuration_guide.html#wwconnect_header">Ehcache Configuration Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../ehcache-webhelp/to-size_sizing_storage_tiers.html#wwconnect_header">Sizing Storage Tiers</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Sizing Examples</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_5_11_10_1" class="Heading_3">Sizing Examples</div><div id="ww3_12_5_11_10_3_2" class="Body">The following examples illustrate both pooled and individual cache-sizing configurations.</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_12_5_11_10_3_4_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_12_5_11_10_3_4_1_3_1_2" class="Table_Cell">Some of the following examples include allocations for off-heap storage. Off-heap data storage (i.e., the off-heap tier) is only available with the Terracotta BigMemory products.</div></td></tr></table></div><div id="ww3_12_5_11_10_3_6_2" class="Section_Title">Pooled Resources</div><div id="ww3_12_5_11_10_3_6_4" class="Body">The following configuration sets pools for all of this CacheManager's caches:</div><div id="ww3_12_5_11_10_3_6_6" class="Preformatted">&lt;ehcache xmlns... <br>        Name="CM1" <br>        maxBytesLocalHeap="100M" <br>        maxBytesLocalOffHeap="10G" <br>        maxBytesLocalDisk="50G"&gt; <br>... <br>&lt;cache name="Cache1" ... &lt;/cache&gt; <br>&lt;cache name="Cache2" ... &lt;/cache&gt; <br>&lt;cache name="Cache3" ... &lt;/cache&gt; <br>&lt;/ehcache&gt;</div><div id="ww3_12_5_11_10_3_6_8" class="Body">CacheManager CM1 automatically allocates these pools equally among its three caches. Each cache gets one third of the allocated heap, off-heap, and local disk. Note that at the CacheManager level, resources can be allocated in bytes only.</div><div id="ww3_12_5_11_10_3_8_2" class="Section_Title">Explicitly Sizing Caches</div><div id="ww3_12_5_11_10_3_8_4" class="Body">You can explicitly allocate resources to specific caches:</div><div id="ww3_12_5_11_10_3_8_6" class="Preformatted">&lt;ehcache xmlns... <br>        Name="CM1" <br>        maxBytesLocalHeap="100M" <br>        maxBytesLocalOffHeap="10G" <br>        maxBytesLocalDisk="60G"&gt; <br>... <br>&lt;cache name="Cache1" ... <br>        maxBytesLocalHeap="50M" <br>        ... <br>  &lt;/cache&gt; <br>&lt;cache name="Cache2" ... <br>       maxBytesLocalOffHeap="5G" <br>       ... <br>  &lt;/cache&gt; <br>&lt;cache name="Cache3" ... &lt;/cache&gt; <br>&lt;/ehcache&gt;</div><div id="ww3_12_5_11_10_3_8_8" class="Body">In the example above, Cache1 reserves 50Mb of the 100Mb local-heap pool; the other caches divide the remaining portion of the pool equally. Cache2 takes half of the local off-heap pool; the other caches divide the remaining portion of the pool equally. Cache3 receives 25Mb of local heap, 2.5Gb of off-heap, and 20Gb of the local disk.</div><div id="ww3_12_5_11_10_3_8_10" class="Body">Caches that reserve a portion of a pool are not required to use that portion. Cache1, for example, has a fixed portion of the local heap but may have any amount of data in heap up to the configured value of 50Mb.</div><div id="ww3_12_5_11_10_3_8_12" class="Body">Note that caches must use the same sizing attributes used to create the pool. Cache1, for example, cannot use <span class="parmname">maxEntriesLocalHeap</span> to reserve a portion of the pool.</div><div id="ww3_12_5_11_10_3_10_2" class="Section_Title">Mixed Sizing Configurations</div><div id="ww3_12_5_11_10_3_10_4" class="Body">If a CacheManager does not pool a particular resource, that resource can still be allocated in cache configuration, as shown in the following example.</div><div id="ww3_12_5_11_10_3_10_6" class="Preformatted">&lt;ehcache xmlns... <br>        Name="CM2" <br>        maxBytesLocalHeap="100M"&gt; <br>... <br>&lt;cache name="Cache4" ... <br>        maxBytesLocalHeap="50M" <br>        maxEntriesLocalDisk="100000" <br>        ... <br>  &lt;/cache&gt; <br>&lt;cache name="Cache5" ... <br>       maxBytesLocalOffHeap="10G" <br>       ... <br>  &lt;/cache&gt; <br>&lt;cache name="Cache6" ... &lt;/cache&gt; <br>&lt;/ehcache&gt;</div><div id="ww3_12_5_11_10_3_10_8" class="Body">CacheManager CM2 creates one pool (local heap). Its caches all use the local heap and are constrained by the pool setting, as expected. However, cache configuration can allocate other resources as desired. In this example, Cache4 allocates disk space for its data, and Cache5 allocates off-heap space for its data. Cache6 gets 25Mb of local heap only.</div><div id="ww3_12_5_11_10_3_12_2" class="Section_Title">Using Percents</div><div id="ww3_12_5_11_10_3_12_4" class="Body">The following configuration sets pools for each tier:</div><div id="ww3_12_5_11_10_3_12_6" class="Preformatted">&lt;ehcache xmlns... <br>        Name="CM1" <br>        maxBytesLocalHeap="1G" <br>        maxBytesLocalOffHeap="10G" <br>        maxBytesLocalDisk="50G"&gt; <br>... <br>&lt;!-- Cache1 gets 400Mb of heap, 2.5Gb of off-heap, and 5Gb of disk. --&gt; <br>&lt;cache name="Cache1" ... <br>maxBytesLocalHeap="40%"&gt; <br>&lt;/cache&gt; <br>&lt;!-- Cache2 gets 300Mb of heap, 5Gb of off-heap, and 5Gb of disk. --&gt; <br>&lt;cache name="Cache2" ... <br>maxBytesLocalOffHeap="50%"&gt; <br>&lt;/cache&gt; <br>&lt;!-- Cache2 gets 300Mb of heap, 2.5Gb of off-heap, and 40Gb of disk. --&gt; <br>&lt;cache name="Cache3" ... <br>maxBytesLocalDisk="80%"&gt; <br>&lt;/cache&gt; <br>&lt;/ehcache&gt;</div><div class="ww_skin_page_overflow"><table class="note1" summary=""><tr><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_12_5_11_10_3_12_8_1_3_1_1_1" class="Note"><span style="font-weight: bold">Note:  </span>&nbsp;</div></td><td class="Table_Cell" style="padding-right: 6px; vertical-align: top"><div id="ww3_12_5_11_10_3_12_8_1_3_1_2" class="Table_Cell">You can use a percentage of the total JVM heap for the CacheManager maxBytesLocalHeap. The CacheManager percentage, then, is a portion of the total JVM heap, and in turn, the Cache percentage is the portion of the CacheManager pool for that tier.</div></td></tr></table></div><div id="ww3_12_5_11_10_3_14_2" class="Section_Title">Sizing Without a Pool</div><div id="ww3_12_5_11_10_3_14_4" class="Body">The CacheManager in this example does not pool any resources.</div><div id="ww3_12_5_11_10_3_14_6" class="Preformatted">&lt;ehcache xmlns... <br>        Name="CM3" <br>       ... &gt; <br>... <br>&lt;cache name="Cache7" ... <br>        maxBytesLocalHeap="50M" <br>        maxEntriesLocalDisk="100000" <br>        ... <br>  &lt;/cache&gt; <br>&lt;cache name="Cache8" ... <br>       maxEntriesLocalHeap="1000" <br>       maxBytesLocalOffHeap="10G" <br>       ... <br>  &lt;/cache&gt; <br>&lt;cache name="Cache9" ... <br>       maxBytesLocalHeap="50M" <br>... <br>&lt;/cache&gt; <br>&lt;/ehcache&gt;</div><div id="ww3_12_5_11_10_3_14_8" class="Body">Caches can be configured to use resources as necessary. Note that every cache in this example must declare a value for local heap. This is because no pool exists for the local heap; implicit (CacheManager configuration) or explicit (cache configuration) local-heap allocation is required.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2010</span><span>-2016</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>