<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Plugging in Your own Eviction Algorithm</title><link rel="Prev" href="co-evict_builtin_algorithms.html" title="Previous"><link rel="Next" href="co-evict_diskstore_eviction_algorighms.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-evict_plugging_in_your_own_eviction_algorighms.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN2KZYhuRGXAFQq_002bRln8cMFQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-evict_plugging_in_your_own_eviction_algorighms.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-title_ehcache_developer_guide.html#wwconnect_header">Ehcache Developer Guide</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-evict_cache_eviction_algorithms.html#wwconnect_header">Cache Eviction Algorithms</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Plugging in Your own Eviction Algorithm</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_3_35_10_1" class="Heading_3">Plugging in Your own Eviction Algorithm</div><div id="ww3_12_3_35_10_3_2" class="Body"><span class="ph"> </span><span class="ph">Ehcache</span> allows you to plug in your own eviction algorithm using Cache.setMemoryStoreEvictionPolicy(Policy policy). You can utilize any Element metadata, which makes possible some very interesting approaches. For example, you might evict an element if it has been hit more than ten times.</div><div id="ww3_12_3_35_10_3_4" class="Preformatted">/** <br>* Sets the eviction policy strategy. The Cache will use a policy at startup. <br>* There are three policies which can be configured: LRU, LFU and FIFO. However <br>* many other policies are possible. That the policy has access to the whole <br>* element enables policies based on the key, value, metadata, statistics, or a <br>* combination of any of the above. <br>* <br>* It is safe to change the policy of a store at any time. The new policy takes <br>* effect immediately. <br>* <br>* @param policy the new policy <br>*/ <br>public void setMemoryStoreEvictionPolicy(Policy policy) { <br>  memoryStore.setEvictionPolicy(policy); <br>}</div><div id="ww3_12_3_35_10_3_6" class="Body">A Policy must implement the following interface:</div><div id="ww3_12_3_35_10_3_8" class="Preformatted">public interface Policy { <br>  /** <br>   * @return the name of the Policy. Inbuilt examples are LRU, LFU and FIFO. <br>   */ <br>  String getName(); <br>  /** <br>   * Finds the best eviction candidate based on the sampled elements. What <br>   * distinguishes this approach from the classic data structures approach is <br>   * that an Element contains metadata (e.g. usage statistics) which can be <br>   * used for making policy decisions, while generic data structures do not. <br>   * It is expected that implementations will take advantage of that <br>   * metadata.<br>   * <br>   * @param sampledElements this should be a random subset of the population <br>   * @param justAdded we probably never want to select the element just added. <br>   * It is provided so that it can be ignored if selected. May be null. <br>   * @return the selected Element <br>   */ <br>  Element selectedBasedOnPolicy(Element[] sampledElements, Element justAdded); <br>  /** <br>   * Compares the desirableness for eviction of two elements <br>   * <br>   * @param element1 the element to compare against <br>   * @param element2 the element to compare <br>   * @return true if the second element is preferable for eviction to the <br>   * first element under ths policy <br>   */ <br>  boolean compare(Element element1, Element element2); <br>}</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>