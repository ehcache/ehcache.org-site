<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Using Grails and Ehcache</title><link rel="Prev" href="co-recipe_web_page_and_fragment_caching.html" title="Previous"><link rel="Next" href="co-recipe_data_freshness_and_expiration.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/social.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/_ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if (window === window.top) {
        // Redirect
        //
        redirect_url = "../index.html#page/Ehcache_Documentation_Set/co-recipe_configure_grails_app_for_clustering.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pKNtiixMQXJmp0r89ceLUig" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-recipe_configure_grails_app_for_clustering.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/_ehcache_all.1.016.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-pubhead_ehcache_recipes.html#wwconnect_header">Ehcache Recipes</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Using Grails and Ehcache</span></div><div class="ww_skin_page_toolbar"></div></header><div id="ww3_12_9_11_1" class="Heading_2">Using Grails and Ehcache</div><div id="ww3_12_9_11_3_2" class="Body">Grails 1.2RC1 and higher use Ehcache as the default Hibernate second level cache. However earlier versions of Grails ship with the Ehcache library and are very simple to enable. The following steps show how to configure Grails to use Ehcache. For 1.2RC1 and higher, some of these steps are already done for you.</div><div id="ww3_12_9_11_3_4_2" class="Section_Title">Configuring Ehcache As the Second Level Hibernate Cache</div><div id="ww3_12_9_11_3_4_4" class="Body">Edit <span class="codeph">DataSource.groovy</span> as follows:</div><div id="ww3_12_9_11_3_4_6" class="Preformatted">hibernate { <br>cache.use_second_level_cache=true <br>cache.use_query_cache=true <br>cache.provider_class='org.hibernate.cache.EhCacheProvider' <br>}</div><div id="ww3_12_9_11_3_6_2" class="Section_Title">Overriding Defaults</div><div id="ww3_12_9_11_3_6_4" class="Body">As is usual with Hibernate, it will use the <span class="codeph">defaultCache</span> configuration as a template to create new caches as required. For production use you often want to customize the cache configuration. To do so, add an ehcache.xml configuration file to the <span class="codeph">conf</span> directory (the same directory that contains <span class="codeph">DataSource.groovy</span>). A sample ehcache.xml which works with the Book demo app and is good as a starter configuration for Grails is shown below:</div><div id="ww3_12_9_11_3_6_6" class="Preformatted">&lt;?xml version="1.0" encoding="UTF-8"?&gt; <br>&lt;ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" <br>    xsi:noNamespaceSchemaLocation="ehcache.xsd" &gt; <br>    &lt;diskStore path="/path/to/store/data"/&gt; <br>    &lt;cacheManagerEventListenerFactory class="" properties=""/&gt; <br>    &lt;defaultCache <br>       maxEntriesLocalHeap="10000" <br>       eternal="false" <br>       timeToLiveSeconds="120"&gt; <br>       &lt;persistence strategy="none"/&gt; <br>    &lt;/defaultCache&gt; <br>    &lt;cache name="Book" <br>      maxEntriesLocalHeap="10000" <br>      timeToIdleSeconds="300" <br>       /&gt; <br>    &lt;cache name="org.hibernate.cache.UpdateTimestampsCache" <br>      maxEntriesLocalHeap="10000" <br>      timeToIdleSeconds="300" <br>       /&gt; <br>    &lt;cache name="org.hibernate.cache.StandardQueryCache" <br>      maxEntriesLocalHeap="10000" <br>      timeToIdleSeconds="300" <br>       /&gt; <br>&lt;/ehcache&gt;</div><div id="ww3_12_9_11_3_8_2" class="Section_Title">Springcache Plugin</div><div id="ww3_12_9_11_3_8_4" class="Body">The Springcache plugin allows you to easily add the following functionality to your Grails project:</div><div id="ww3_12_9_11_3_8_6_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Caching of Spring bean methods (typically Grails service methods).</div><div id="ww3_12_9_11_3_8_6_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Caching of page fragments generated by Grails controllers.</div><div id="ww3_12_9_11_3_8_6_6" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span>Cache flushing when Spring bean methods or controller actions are invoked.</div><div id="ww3_12_9_11_3_8_8" class="Body">The plugin depends on the Ehcache and Ehcache-Web libraries. See <span class="external"><a href="http://grails.org/plugin/springcache" target="external_window">Springcache Plugin</a></span>, a part of the Grails project, for more information.</div><div id="ww3_12_9_11_3_10_2" class="Section_Title">Clustering Web Sessions</div><div id="ww3_12_9_11_3_10_4" class="Body">This is handled by Terracotta Web Sessions. See <span class="external"><a href="http://gquick.blogspot.com/2010/03/clustering-grails-app-with-terracotta.html" target="external_window">this blog</a></span> for a great introduction on getting this going with Grails and Tomcat.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2010</span><span>-2015</span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr></div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/ehcache_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
          |&nbsp;&nbsp;
        <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></body></html>